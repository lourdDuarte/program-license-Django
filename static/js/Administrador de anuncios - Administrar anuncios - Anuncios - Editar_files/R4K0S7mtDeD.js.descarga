if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("jsondiffpatch/environment",[],function(a,b,c,d,e,f){f.isBrowser=typeof window!=="undefined"},null);
__d("jsondiffpatch/formatters/base",[],function(a,b,c,d,e,f){var g=typeof Array.isArray==="function"?Array.isArray:function(a){return a instanceof Array},h=typeof Object.keys==="function"?function(a){return Object.keys(a)}:function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b},i=function(a){return a.substr(0,1)==="_"?a.slice(1):a},j=function(a){if(a==="_t")return-1;else if(a.substr(0,1)==="_")return parseInt(a.slice(1),10);else return parseInt(a,10)+.1},k=function(a,b){return j(a)-j(b)};a=function(){};a.prototype.format=function(a,b){var c={};this.prepareContext(c);this.recurse(c,a,b);return this.finalize(c)};a.prototype.prepareContext=function(a){a.buffer=[],a.out=function(){this.buffer.push.apply(this.buffer,arguments)}};a.prototype.typeFormattterNotFound=function(a,b){throw new Error("cannot format delta type: "+b)};a.prototype.typeFormattterErrorFormatter=function(a,b){return b.toString()};a.prototype.finalize=function(a){if(g(a.buffer))return a.buffer.join("")};a.prototype.recurse=function(a,b,c,d,e,f,g){var h=b&&f;h=h?f.value:c;if(typeof b==="undefined"&&typeof d==="undefined")return void 0;c=this.getDeltaType(b,f);var i=c==="node"?b._t==="a"?"array":"object":"";typeof d!=="undefined"?this.nodeBegin(a,d,e,c,i,g):this.rootBegin(a,c,i);var j;try{j=this["format_"+c]||this.typeFormattterNotFound(a,c),j.call(this,a,b,h,d,e,f)}catch(c){this.typeFormattterErrorFormatter(a,c,b,h,d,e,f),typeof console!=="undefined"&&emptyFunction}typeof d!=="undefined"?this.nodeEnd(a,d,e,c,i,g):this.rootEnd(a,c,i)};a.prototype.formatDeltaChildren=function(a,b,c){var d=this;this.forEachDeltaKey(b,c,function(e,f,g,h){d.recurse(a,b[e],c?c[f]:void 0,e,f,g,h)})};a.prototype.forEachDeltaKey=function(a,b,c){var d=h(a),e=a._t==="a",f={},j;if(typeof b!=="undefined")for(j in b)typeof a[j]==="undefined"&&(!e||typeof a["_"+j]==="undefined")&&d.push(j);for(j in a){var l=a[j];g(l)&&l[2]===3&&(f[l[1].toString()]={key:j,value:b&&b[parseInt(j.substr(1))]},this.includeMoveDestinations!==!1&&(typeof b==="undefined"&&typeof a[l[1]]==="undefined"&&d.push(l[1].toString())))}e?d.sort(k):d.sort();for(var l=0,a=d.length;l<a;l++){b=d[l];if(e&&b==="_t")continue;j=e?typeof b==="number"?b:parseInt(i(b),10):b;var m=l===a-1;c(b,j,f[j],m)}};a.prototype.getDeltaType=function(a,b){if(typeof a==="undefined")return typeof b!=="undefined"?"movedestination":"unchanged";if(g(a)){if(a.length===1)return"added";if(a.length===2)return"modified";if(a.length===3&&a[2]===0)return"deleted";if(a.length===3&&a[2]===2)return"textdiff";if(a.length===3&&a[2]===3)return"moved"}else if(typeof a==="object")return"node";return"unknown"};a.prototype.parseTextDiff=function(a){var b=[];a=a.split("\n@@ ");for(var c=0,d=a.length;c<d;c++){var e=a[c],f={pieces:[]},g=/^(?:@@ )?[-+]?(\d+),(\d+)/.exec(e).slice(1);f.location={line:g[0],chr:g[1]};g=e.split("\n").slice(1);for(var e=0,h=g.length;e<h;e++){var i=g[e];if(!i.length)continue;var j={type:"context"};i.substr(0,1)==="+"?j.type="added":i.substr(0,1)==="-"&&(j.type="deleted");j.text=i.slice(1);f.pieces.push(j)}b.push(f)}return b};f.BaseFormatter=a},null);
__d("jsondiffpatch/formatters/annotated",["jsondiffpatch/formatters/base"],function(a,b,c,d,e,f){a=b("jsondiffpatch/formatters/base");var g=a.BaseFormatter,h=function(){this.includeMoveDestinations=!1};h.prototype=new g();h.prototype.prepareContext=function(a){g.prototype.prepareContext.call(this,a),a.indent=function(a){this.indentLevel=(this.indentLevel||0)+(typeof a==="undefined"?1:a),this.indentPad=new Array(this.indentLevel+1).join("&nbsp;&nbsp;")},a.row=function(b,c){a.out('<tr><td style="white-space: nowrap;"><pre class="jsondiffpatch-annotated-indent" style="display: inline-block">'),a.out(a.indentPad),a.out('</pre><pre style="display: inline-block">'),a.out(b),a.out('</pre></td><td class="jsondiffpatch-delta-note"><div>'),a.out(c),a.out("</div></td></tr>")}};h.prototype.typeFormattterErrorFormatter=function(a,b){a.row("",'<pre class="jsondiffpatch-error">'+b+"</pre>")};h.prototype.formatTextDiffString=function(a,b){b=this.parseTextDiff(b);a.out('<ul class="jsondiffpatch-textdiff">');for(var c=0,d=b.length;c<d;c++){var e=b[c];a.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+e.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+e.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');e=e.pieces;for(var f=0,g=e.length;f<g;f++){var h=e[f];a.out('<span class="jsondiffpatch-textdiff-'+h.type+'">'+h.text+"</span>")}a.out("</div></li>")}a.out("</ul>")};h.prototype.rootBegin=function(a,b,c){a.out('<table class="jsondiffpatch-annotated-delta">'),b==="node"&&(a.row("{"),a.indent()),c==="array"&&a.row('"_t": "a",',"Array delta (member names indicate array indices)")};h.prototype.rootEnd=function(a,b){b==="node"&&(a.indent(-1),a.row("}")),a.out("</table>")};h.prototype.nodeBegin=function(a,b,c,d,e){a.row("&quot;"+b+"&quot;: {"),d==="node"&&a.indent(),e==="array"&&a.row('"_t": "a",',"Array delta (member names indicate array indices)")};h.prototype.nodeEnd=function(a,b,c,d,e,f){d==="node"&&a.indent(-1),a.row("}"+(f?"":","))};h.prototype.format_unchanged=function(){return};h.prototype.format_movedestination=function(){return};h.prototype.format_node=function(a,b,c){this.formatDeltaChildren(a,b,c)};var i=function(a){return'<pre style="display:inline-block">&quot;'+a+"&quot;</pre>"},j={added:function(a,b,c,d){a=" <pre>([newValue])</pre>";if(typeof d==="undefined")return"new value"+a;return typeof d==="number"?"insert at index "+d+a:"add property "+i(d)+a},modified:function(a,b,c,d){a=" <pre>([previousValue, newValue])</pre>";if(typeof d==="undefined")return"modify value"+a;return typeof d==="number"?"modify at index "+d+a:"modify property "+i(d)+a},deleted:function(a,b,c,d){a=" <pre>([previousValue, 0, 0])</pre>";if(typeof d==="undefined")return"delete value"+a;return typeof d==="number"?"remove index "+d+a:"delete property "+i(d)+a},moved:function(a,b,c,d){return'move from <span title="(position to remove at original state)">index '+d+'</span> to <span title="(position to insert at final state)">index '+a[1]+"</span>"},textdiff:function(a,b,c,d){a=typeof d==="undefined"?"":typeof d==="number"?" at index "+d:" at property "+i(d);return"text diff"+a+', format is <a href="https://code.google.com/p/google-diff-match-patch/wiki/Unidiff">a variation of Unidiff</a>'}};c=function(a,b){var c=this.getDeltaType(b),d=j[c],e=d&&d.apply(d,Array.prototype.slice.call(arguments,1)),f=JSON.stringify(b,null,2);c==="textdiff"&&(f=f.split("\\n").join('\\n"+\n   "'));a.indent();a.row(f,e);a.indent(-1)};h.prototype.format_added=c;h.prototype.format_modified=c;h.prototype.format_deleted=c;h.prototype.format_moved=c;h.prototype.format_textdiff=c;f.AnnotatedFormatter=h;var k;f.format=function(a,b){k||(k=new h());return k.format(a,b)}},null);
__d("jsondiffpatch/formatters/html",["jsondiffpatch/formatters/base"],function(a,b,c,d,e,f){a=b("jsondiffpatch/formatters/base");c=a.BaseFormatter;var g=function(){};g.prototype=new c();function h(a){a=a;var b=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/'/g,"&apos;"],[/"/g,"&quot;"]];for(var c=0;c<b.length;c++)a=a.replace(b[c][0],b[c][1]);return a}g.prototype.typeFormattterErrorFormatter=function(a,b){a.out('<pre class="jsondiffpatch-error">'+b+"</pre>")};g.prototype.formatValue=function(a,b){a.out("<pre>"+h(JSON.stringify(b,null,2))+"</pre>")};g.prototype.formatTextDiffString=function(a,b){b=this.parseTextDiff(b);a.out('<ul class="jsondiffpatch-textdiff">');for(var c=0,d=b.length;c<d;c++){var e=b[c];a.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+e.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+e.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');e=e.pieces;for(var f=0,g=e.length;f<g;f++){var i=e[f];a.out('<span class="jsondiffpatch-textdiff-'+i.type+'">'+h(unescape(i.text))+"</span>")}a.out("</div></li>")}a.out("</ul>")};var i=function(a){a=a||document;var b=function(a){return a.textContent||a.innerText},c=function(a,b,c){a=a.querySelectorAll(b);for(var b=0,d=a.length;b<d;b++)c(a[b])},d=function(a,b){for(var c=0,d=a.children.length;c<d;c++)b(a.children[c],c)};c(a,".jsondiffpatch-arrow",function(a){var c=a.parentNode,e=a.children[0],f=e.children[1];e.style.display="none";var g=b(c.querySelector(".jsondiffpatch-moved-destination")),h=c.parentNode,i;d(h,function(a){a.getAttribute("data-key")===g&&(i=a)});if(!i)return;try{h=i.offsetTop-c.offsetTop;e.setAttribute("height",Math.abs(h)+6);a.style.top=-8+(h>0?0:h)+"px";c=h>0?"M30,0 Q-10,"+Math.round(h/2)+" 26,"+(h-4):"M30,"+-h+" Q-10,"+Math.round(-h/2)+" 26,4";f.setAttribute("d",c);e.style.display=""}catch(a){return}})};g.prototype.rootBegin=function(a,b,c){b="jsondiffpatch-"+b+(c?" jsondiffpatch-child-node-type-"+c:"");a.out('<div class="jsondiffpatch-delta '+b+'">')};g.prototype.rootEnd=function(a){a.out("</div>"+(a.hasArrows?'<script type="text/javascript">setTimeout('+i.toString()+",10);</script>":""))};g.prototype.nodeBegin=function(a,b,c,d,e){b="jsondiffpatch-"+d+(e?" jsondiffpatch-child-node-type-"+e:"");a.out('<li class="'+b+'" data-key="'+c+'"><div class="jsondiffpatch-property-name">'+c+"</div>")};g.prototype.nodeEnd=function(a){a.out("</li>")};g.prototype.format_unchanged=function(a,b,c){if(typeof c==="undefined")return;a.out('<div class="jsondiffpatch-value">');this.formatValue(a,c);a.out("</div>")};g.prototype.format_movedestination=function(a,b,c){if(typeof c==="undefined")return;a.out('<div class="jsondiffpatch-value">');this.formatValue(a,c);a.out("</div>")};g.prototype.format_node=function(a,b,c){var d=b._t==="a"?"array":"object";a.out('<ul class="jsondiffpatch-node jsondiffpatch-node-type-'+d+'">');this.formatDeltaChildren(a,b,c);a.out("</ul>")};g.prototype.format_added=function(a,b){a.out('<div class="jsondiffpatch-value">'),this.formatValue(a,b[0]),a.out("</div>")};g.prototype.format_modified=function(a,b){a.out('<div class="jsondiffpatch-value jsondiffpatch-left-value">'),this.formatValue(a,b[0]),a.out('</div><div class="jsondiffpatch-value jsondiffpatch-right-value">'),this.formatValue(a,b[1]),a.out("</div>")};g.prototype.format_deleted=function(a,b){a.out('<div class="jsondiffpatch-value">'),this.formatValue(a,b[0]),a.out("</div>")};g.prototype.format_moved=function(a,b){a.out('<div class="jsondiffpatch-value">'),this.formatValue(a,b[0]),a.out('</div><div class="jsondiffpatch-moved-destination">'+b[1]+"</div>"),a.out('<div class="jsondiffpatch-arrow" style="position: relative; left: -34px;">        <svg width="30" height="60" style="position: absolute; display: none;">        <defs>            <marker id="markerArrow" markerWidth="8" markerHeight="8" refx="2" refy="4"                   orient="auto" markerUnits="userSpaceOnUse">                <path d="M1,1 L1,7 L7,4 L1,1" style="fill: #339;" />            </marker>        </defs>        <path d="M30,0 Q-10,25 26,50" style="stroke: #88f; stroke-width: 2px; fill: none;        stroke-opacity: 0.5; marker-end: url(#markerArrow);"></path>        </svg>        </div>'),a.hasArrows=!0};g.prototype.format_textdiff=function(a,b){a.out('<div class="jsondiffpatch-value">'),this.formatTextDiffString(a,b[0]),a.out("</div>")};var j=function(a,b,c){var d=b||document.body;b="jsondiffpatch-unchanged-";var e={showing:b+"showing",hiding:b+"hiding",visible:b+"visible",hidden:b+"hidden"},f=d.classList;if(!f)return;if(!c){f.remove(e.showing);f.remove(e.hiding);f.remove(e.visible);f.remove(e.hidden);a===!1&&f.add(e.hidden);return}a===!1?(f.remove(e.showing),f.add(e.visible),setTimeout(function(){f.add(e.hiding)},10)):(f.remove(e.hiding),f.add(e.showing),f.remove(e.hidden));var g=setInterval(function(){i(d)},100);setTimeout(function(){f.remove(e.showing),f.remove(e.hiding),a===!1?(f.add(e.hidden),f.remove(e.visible)):(f.add(e.visible),f.remove(e.hidden)),setTimeout(function(){f.remove(e.visible),clearInterval(g)},c+400)},c)};d=function(a,b){return j(!1,a,b)};f.HtmlFormatter=g;f.showUnchanged=j;f.hideUnchanged=d;var k;f.format=function(a,b){k||(k=new g());return k.format(a,b)}},null);
__d("jsondiffpatch/formatters/jsonpatch",["jsondiffpatch/formatters/base"],function(a,b,c,d,e,f){(function(){var a=b("jsondiffpatch/formatters/base"),c=a.BaseFormatter,d={added:"add",deleted:"remove",modified:"replace",moved:"moved",movedestination:"movedestination",unchanged:"unchanged",error:"error",textDiffLine:"textDiffLine"};function e(){this.includeMoveDestinations=!1}e.prototype=new c();e.prototype.prepareContext=function(a){c.prototype.prepareContext.call(this,a),a.result=[],a.path=[],a.pushCurrentOp=function(a,b){a={op:a,path:this.currentPath()};typeof b!=="undefined"&&(a.value=b);this.result.push(a)},a.currentPath=function(){return"/"+this.path.join("/")}};e.prototype.typeFormattterErrorFormatter=function(a,b){a.out("[ERROR]"+b)};e.prototype.rootBegin=function(){};e.prototype.rootEnd=function(){};e.prototype.nodeBegin=function(a,b,c){a.path.push(c)};e.prototype.nodeEnd=function(a){a.path.pop()};e.prototype.format_unchanged=function(a,b,c){if(typeof c==="undefined")return;a.pushCurrentOp(d.unchanged,c)};e.prototype.format_movedestination=function(a,b,c){if(typeof c==="undefined")return;a.pushCurrentOp(d.movedestination,c)};e.prototype.format_node=function(a,b,c){this.formatDeltaChildren(a,b,c)};e.prototype.format_added=function(a,b){a.pushCurrentOp(d.added,b[0])};e.prototype.format_modified=function(a,b){a.pushCurrentOp(d.modified,b[1])};e.prototype.format_deleted=function(a){a.pushCurrentOp(d.deleted)};e.prototype.format_moved=function(a,b){a.pushCurrentOp(d.moved,b[1])};e.prototype.format_textdiff=function(){throw"not implimented"};e.prototype.format=function(a,b){var c={};this.prepareContext(c);this.recurse(c,a,b);return c.result};f.JSONFormatter=e;var g;function h(a){return a[a.length-1]}function i(a,b){a.sort(b);return a}var j=function(a,b){a=parseInt(a,10);b=parseInt(b,10);if(!(isNaN(a)||isNaN(b)))return b-a;else return 0};function k(a){return i(a,function(a,b){a=a.path.split("/");b=b.path.split("/");if(a.length!==b.length)return a.length-b.length;else return j(h(a),h(b))})}function l(a,b){var c=[],d=[];a.forEach(function(a){var e=b(a)?c:d;e.push(a)});return[c,d]}function m(a){a=l(a,function(a){return a.op==="remove"});var b=a[0];a=a[1];b=k(b);return b.concat(a)}a=function(a,b){g||(g=new e());return m(g.format(a,b))};f.log=function(a,b){};f.format=a})()},null);
__d("jsondiffpatch/formatters",["jsondiffpatch/environment","jsondiffpatch/formatters/base","jsondiffpatch/formatters/html","jsondiffpatch/formatters/annotated","jsondiffpatch/formatters/jsonpatch"],function(a,b,c,d,e,f){b("jsondiffpatch/environment"),f.base=b("jsondiffpatch/formatters/base"),f.html=b("jsondiffpatch/formatters/html"),f.annotated=b("jsondiffpatch/formatters/annotated"),f.jsonpatch=b("jsondiffpatch/formatters/jsonpatch")},null);