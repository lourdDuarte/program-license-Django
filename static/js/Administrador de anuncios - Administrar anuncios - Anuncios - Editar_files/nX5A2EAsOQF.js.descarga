if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("AdsResetUnderstandingSurveyAction",["AdsPublishingUnderstandingSurveyProvider","AdsPublishingUnderstandingSurveyReducerPlugins","Laminar"],function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsPublishingUnderstandingSurveyReducerPlugins").ResetReducerPlugin,b("AdsPublishingUnderstandingSurveyProvider"),{},"")]},function(){return[]},"AdsResetUnderstandingSurveyActionPlugin");e.exports=a},null);
__d("AdvertiserUnderstandingSurveyUtils",["AdsAsyncSurveyUtils","AdsCampaignGroupEffectiveStatus","AdsEffectiveStatus","Instant","filterMap","someMap","unixTimestampFromDate"],function(a,b,c,d,e,f,g){"use strict";var h=.7,i=.2;function a(a,b,d,e){b=c("filterMap")(b,function(a){a=a.getValue();return a!=null&&a.start_time!=null&&j(a.start_time,a.stop_time)&&(a.lifetime_budget!=null||a.daily_budget!=null)});d=c("filterMap")(d,function(a){a=a.getValue();return a!=null&&j(a.start_time,a.end_time)&&(a.lifetime_budget!=null||a.daily_budget!=null)});var f=c("someMap")(b,function(a,b){b=e.get(b);return((a=a.getValue())==null?void 0:a.effective_status)===c("AdsCampaignGroupEffectiveStatus").ACTIVE&&b!=null&&k(b)}),g=c("someMap")(d,function(a,b){b=e.get(b);return((a=a.getValue())==null?void 0:a.effective_status)===c("AdsEffectiveStatus").ACTIVE&&b!=null&&k(b)});b=c("someMap")(b,function(a,b){a=e.get(b);return a!=null&&l(a)});d=c("someMap")(d,function(a,b){a=e.get(b);return a!=null&&l(a)});var h=null;f||g?h=178203674428448:(b||d)&&(h=938119390203567);if(h!=null){f=c("AdsAsyncSurveyUtils").addSurveyBeforeCallback(a,h,function(){return null},null,{integration_point_id:h});f()}}function j(a,b){if(b==null)return!0;b=(d("Instant").now()-c("unixTimestampFromDate")(a))/(c("unixTimestampFromDate")(b)-c("unixTimestampFromDate")(a));return b>=i&&b<=1-i}function k(a){return a.action==="modify"&&a.values.some(function(a){var b=a.field,c=a.old_value;a=a.new_value;return(b==="daily_budget"||b==="lifetime_budget")&&c!=null&&Number(JSON.parse(a))<h*Number(JSON.parse(String(c)))})}function l(a){return a.action==="modify"&&a.values.some(function(a){var b=a.field,c=a.old_value;a=a.new_value;return b==="status"&&JSON.parse(c)==="ACTIVE"&&JSON.parse(a)==="PAUSED"})}g.triggerSurvey=a},98);
__d("AdsPublishingUnderstandingSurveyContainer.react",["AdsAccountStore","AdsFluxHooks","AdsLoadObjectUtils","AdsPECampaignGroupSelectors","AdsPECampaignSelectors","AdsPublishingUnderstandingSurveyProvider","AdsResetUnderstandingSurveyAction","AdvertiserUnderstandingSurveyUtils","adsCreateSelector","createMapBy","filterMap","mapMap","react"],function(a,b,c,d,e,f,g){"use strict";d("react");var h=d("react").useEffect,i=c("adsCreateSelector")([c("AdsAccountStore").getSelectedAccountID,c("AdsPublishingUnderstandingSurveyProvider").toFluxSelector(),d("AdsPECampaignSelectors").getByFieldsSelector,d("AdsPECampaignGroupSelectors").getByFieldsSelector],function(a,b,d,e){var f=b.shouldTriggerSurvery,g=b.fragmentsMap;b=b.fragmentStatuses;b=c("createMapBy")(b,function(a){return a.fragment_id});var h=c("mapMap")(c("filterMap")(b,function(a){return a.ad_object_type==="campaign"}),function(a){return e(a.ad_object_id,{daily_budget:null,effective_status:null,lifetime_budget:null,start_time:null,stop_time:null})});b=c("mapMap")(c("filterMap")(b,function(a){return a.ad_object_type==="ad_set"}),function(a){return d(a.ad_object_id,{daily_budget:null,effective_status:null,lifetime_budget:null,start_time:null,end_time:null})});return{adAccountID:a,campaignGroupMap:h,campaignMap:b,fragmentsMap:g,shouldTriggerSurvery:f}},{name:f.id+".stateSelector"});function a(){var a=d("AdsFluxHooks").useAdsSelector(i),b=a.adAccountID,e=a.campaignGroupMap,f=a.campaignMap,g=a.fragmentsMap,j=a.shouldTriggerSurvery,k=d("AdsLoadObjectUtils").anyLoadingOrEmpty(e.values())||d("AdsLoadObjectUtils").anyLoadingOrEmpty(f.values());h(function(){!k&&b!=null&&j&&g.size>0&&(e.size>0||f.size>0)&&(d("AdvertiserUnderstandingSurveyUtils").triggerSurvey(b,e,f,g),c("AdsResetUnderstandingSurveyAction").dispatch({},{line:"112",module:"AdsPublishingUnderstandingSurveyContainer.react.js"}))},[k,b,e,f,g,j]);return null}b=d("AdsFluxHooks").adsFluxContainer(a,null,{containerName:f.id});g["default"]=b},98);