if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("MNCommercePageSetting",[],function(a,b,c,d,e,f){e.exports={COMMERCE_FAQ_ENABLED:"COMMERCE_FAQ_ENABLED",IN_MESSENGER_SHOPPING_ENABLED:"IN_MESSENGER_SHOPPING_ENABLED",COMMERCE_NUX_ENABLED:"COMMERCE_NUX_ENABLED",NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED:"NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED",STRUCTURED_MENU_ENABLED:"STRUCTURED_MENU_ENABLED",USER_CONTROL_TOPIC_MANAGE_ENABLED:"USER_CONTROL_TOPIC_MANAGE_ENABLED",COMPOSER_INPUT_DISABLED:"COMPOSER_INPUT_DISABLED"}},null);
__d("AdsMessengerPageWelcomeMessageListDataProvider",["AdsMessengerPageWelcomeMessageListDataProviderPlugin","Laminar"],function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsMessengerPageWelcomeMessageListDataProviderPlugin"),"AdsMessengerPageWelcomeMessageListDataProviderPlugin")},null);
__d("AdsMessengerPageWelcomeMessageListLoadedReducerPlugin",[],function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return a.merge(b.pageWelcomeMessageList)}};b=a;f["default"]=b},66);
__d("AdsMessengerPageWelcomeMessageListLoadedAction",["AdsMessengerPageWelcomeMessageListDataProvider","AdsMessengerPageWelcomeMessageListLoadedReducerPlugin","Laminar"],function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsMessengerPageWelcomeMessageListLoadedReducerPlugin"),b("AdsMessengerPageWelcomeMessageListDataProvider"),{},"")]},function(){return[]},"ADS_MESSENGER_PAGE_WELCOME_MESSAGE_LIST.LOADED");e.exports=a},null);
__d("AdsMessengerPageWelcomeMessageListLoadingReducerPlugin",["mapSet"],function(a,b,c,d,e,f,g){"use strict";a={reduce:function(a,b){return a.merge(c("mapSet")(b.pageIDs,function(b){return[b,a.get(b).loading()]}))}};b=a;g["default"]=b},98);
__d("AdsMessengerPageWelcomeMessageListLoadingAction",["AdsMessengerPageWelcomeMessageListDataProvider","AdsMessengerPageWelcomeMessageListLoadingReducerPlugin","Laminar"],function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsMessengerPageWelcomeMessageListLoadingReducerPlugin"),b("AdsMessengerPageWelcomeMessageListDataProvider"),{},"")]},function(){return[]},"ADS_MESSENGER_PAGE_WELCOME_MESSAGE_LIST.LOADING");e.exports=a},null);
__d("AdsUEditorAdgroupSetPageWelcomeMessageDataAction",["Laminar","ifRequired_FOR_LAMINAR_CODEGEN"],function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("ifRequired_FOR_LAMINAR_CODEGEN")("AdsUEditorAdgroupSetPageWelcomeMessageReducerPlugin",function(a){return b("ifRequired_FOR_LAMINAR_CODEGEN")("AdsCFAdgroupDataProvider",function(c){return b("Laminar").__createReducer(a,c,{},"")})})]},function(){return[]},"ADS_ADGROUP_EDITOR_SET_PAGE_WELCOME_MESSAGE");e.exports=a},null);
__d("XMessengerVisualEditorPageWelcomeMessageController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("/commerce/messenger_monetization/page_welcome_message/",{page_id:{type:"FBID",required:!0},page_welcome_message:{type:"String",required:!0},template_name:{type:"String",required:!0},is_edit:{type:"Bool",defaultValue:!1},ad_account_id:{type:"String",required:!0}})},null);
__d("XMessengerVisualEditorPageWelcomeMessageDeleteController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("/commerce/messenger_monetization/delete_page_welcome_message/",{template_id:{type:"FBID",required:!0}})},null);
__d("AdsMessengerPageWelcomeMessageDataManager",["AdsGraphAPI","AdsInterfacesLogger","AdsMessengerPageWelcomeMessageListLoadedAction","AdsMessengerPageWelcomeMessageListLoadingAction","AdsMessengerVisualEditorLoggerEvents","AdsUEditorAdgroupSetExistingPostPageWelcomeMessageDataAction","AdsUEditorAdgroupSetPageWelcomeMessageDataAction","AsyncRequest","XMessengerVisualEditorPageWelcomeMessageController","XMessengerVisualEditorPageWelcomeMessageDeleteController","emptyFunction","promiseDone","promiseLoadObjects"],function(a,b,c,d,e,f,g){"use strict";var h=50,i=["id","template_name","page_welcome_message_body","time_created"];a=function(){function a(){}var b=a.prototype;b.getPageWelcomeMessageList=function(a){return d("AdsGraphAPI").get(f.id).object("page",a).edge("messenger_ads_page_welcome_messages").batched().get({fields:i,limit:h})};b.createCustomTemplate=function(a,b,d,e,f,g,h,i,j){var k=this;g===void 0&&(g="0");h===void 0&&(h=!1);i===void 0&&(i=!1);j===void 0&&(j=c("emptyFunction"));d=c("XMessengerVisualEditorPageWelcomeMessageController").getURIBuilder().setFBID("page_id",b).setString("page_welcome_message",d).setString("template_name",e.trim()).setBool("is_edit",h).setString("ad_account_id",g).getURI();new(c("AsyncRequest"))().setURI(d).setErrorHandler(function(a){h===!0?c("AdsInterfacesLogger").log({eventName:c("AdsMessengerVisualEditorLoggerEvents").CTM_EDIT_TEMPLATE_FAIL}):c("AdsInterfacesLogger").log({eventName:c("AdsMessengerVisualEditorLoggerEvents").CTM_CREATE_NEW_TEMPLATE_FAIL})}).setHandler(function(d){h===!0?c("AdsInterfacesLogger").log({eventName:c("AdsMessengerVisualEditorLoggerEvents").CTM_EDIT_TEMPLATE_SUCCESS}):c("AdsInterfacesLogger").log({eventName:c("AdsMessengerVisualEditorLoggerEvents").CTM_CREATE_NEW_TEMPLATE_SUCCESS,data:{facebook_page_id:b}}),k.fetchAllPageWelcomeMessageList(new Set([b])),i===!0?c("AdsUEditorAdgroupSetExistingPostPageWelcomeMessageDataAction").dispatch({hostID:f,adgroupIDs:a,pageWelcomeMessage:JSON.stringify(JSON.parse(d.payload.page_welcome_message))},{line:"101",module:"AdsMessengerPageWelcomeMessageDataManager.js"}):c("AdsUEditorAdgroupSetPageWelcomeMessageDataAction").dispatch({hostID:f,adgroupIDs:a,pageWelcomeMessage:JSON.stringify(JSON.parse(d.payload.page_welcome_message))},{line:"111",module:"AdsMessengerPageWelcomeMessageDataManager.js"}),j()}).send()};b.deleteExistingTemplate=function(a,b){var d=this;b=c("XMessengerVisualEditorPageWelcomeMessageDeleteController").getURIBuilder().setFBID("template_id",b).getURI();new(c("AsyncRequest"))().setURI(b).setHandler(function(b){d.fetchAllPageWelcomeMessageList(new Set([a])),c("AdsInterfacesLogger").log({eventName:c("AdsMessengerVisualEditorLoggerEvents").CTM_DELETE_TEMPLATE})}).send()};b.fetchAllPageWelcomeMessageList=function(a){var b=this;c("AdsMessengerPageWelcomeMessageListLoadingAction").dispatch({pageIDs:a},{line:"142",module:"AdsMessengerPageWelcomeMessageDataManager.js"});var d=new Map();a.forEach(function(a){return d.set(a,b.getPageWelcomeMessageList(a))});c("promiseDone")(c("promiseLoadObjects")(d),function(a){c("AdsMessengerPageWelcomeMessageListLoadedAction").dispatch({pageWelcomeMessageList:a},{line:"148",module:"AdsMessengerPageWelcomeMessageDataManager.js"})})};return a}();b=new a();g["default"]=b},98);
__d("AdsMessengerPageWelcomeMessageListDataProviderPlugin",["AdsMessengerPageWelcomeMessageDataManager","AdsMessengerPageWelcomeMessageListLoadedAction","AdsMessengerPageWelcomeMessageListLoadingAction","LoadObjectMap","promiseDone","promiseLoadObjectsFromKeys"],function(a,b,c,d,e,f,g){"use strict";a={initialState:c("LoadObjectMap").create(function(a){c("AdsMessengerPageWelcomeMessageListLoadingAction").dispatch({pageIDs:a},{line:"30",module:"AdsMessengerPageWelcomeMessageListDataProviderPlugin.js"}),c("promiseDone")(c("promiseLoadObjectsFromKeys")(a,c("AdsMessengerPageWelcomeMessageDataManager").getPageWelcomeMessageList),function(a){c("AdsMessengerPageWelcomeMessageListLoadedAction").dispatch({pageWelcomeMessageList:a},{line:"38",module:"AdsMessengerPageWelcomeMessageListDataProviderPlugin.js"})})})};b=a;g["default"]=b},98);
__d("AdsMessengerPartialAutomatedCreationErrorDataProviderPlugin",[],function(a,b,c,d,e,f){"use strict";a={initialState:{errorMessage:""}};b=a;f["default"]=b},66);
__d("AdsMessengerPartialAutomatedCreationErrorDataProvider",["AdsMessengerPartialAutomatedCreationErrorDataProviderPlugin","Laminar"],function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsMessengerPartialAutomatedCreationErrorDataProviderPlugin"),"AdsMessengerPartialAutomatedCreationErrorDataProviderPlugin")},null);
__d("AdsMessengerPartialAutomatedCreationErrorDataReducerPlugin",[],function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return{errorMessage:b.errorMessage}}};b=a;f["default"]=b},66);
__d("AdsMessengerPartialAutomatedCreationErrorDataAction",["AdsMessengerPartialAutomatedCreationErrorDataProvider","AdsMessengerPartialAutomatedCreationErrorDataReducerPlugin","Laminar"],function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsMessengerPartialAutomatedCreationErrorDataReducerPlugin"),b("AdsMessengerPartialAutomatedCreationErrorDataProvider"),{},"")]},function(){return[]},"ADS_MESSENGER_PARTIAL_AUTOMATED_CREATION_ERROR");e.exports=a},null);
__d("AdsMessengerPartialAutomatedCreationStateDataProviderPlugin",["MessengerAdsPartialAutomatedConstants","MessengerAdsPartialAutomatedQuestionStrings"],function(a,b,c,d,e,f,g){"use strict";a={initialState:{additionalQuestionItems:[],confirmationAttachment:d("MessengerAdsPartialAutomatedConstants").DEFAULT_CONFIRMATION_ATTACHMENT,confirmationCTA:d("MessengerAdsPartialAutomatedConstants").DEFAULT_CTM_LEAD_GEN_CTA_SPEC,confirmationMessage:d("MessengerAdsPartialAutomatedConstants").DEFAULT_CONFIRMATION_MESSAGE_CTM_LEAD_GEN,disqualifyMessage:d("MessengerAdsPartialAutomatedConstants").DEFAULT_DISQUALIFY_MESSAGE_CTM_LEAD_GEN.toString(),hopAppSetting:{appID:null,toggle:!1,summary:null},followUpMessage:d("MessengerAdsPartialAutomatedConstants").DEFAULT_FOLLOW_UP_MESSAGE,introMessage:d("MessengerAdsPartialAutomatedConstants").DEFAULT_INTRO_MESSAGE_CTM_LEAD_GEN,privacyURL:null,questionItems:d("MessengerAdsPartialAutomatedQuestionStrings").getCTMLeadGenQuestions(null),questionsCompleteMessage:d("MessengerAdsPartialAutomatedConstants").POST_LEAD_DEFAULT_QUESTIONS_COMPLETE_MESSAGE.toString(),reminderText:d("MessengerAdsPartialAutomatedConstants").DEFAULT_CTM_LEAD_GEN_REMINDER_TEXT.toString(),stopQuestionMessage:d("MessengerAdsPartialAutomatedConstants").DEFAULT_STOP_QUESTION_MESSAGE_CTM_LEAD_GEN.toString(),customInvalidTextFields:{isCustomOn:!1,phoneText:d("MessengerAdsPartialAutomatedConstants").DEFAULT_PHONE_VALIDATION_MESSAGE.toString(),emailText:d("MessengerAdsPartialAutomatedConstants").DEFAULT_EMAIL_VALIDATION_MESSAGE.toString(),multipleChoiceText:d("MessengerAdsPartialAutomatedConstants").DEFAULT_MULTIPLE_CHOICE_VALIDATION_MESSAGE.toString(),workEmailText:d("MessengerAdsPartialAutomatedConstants").DEFAULT_EMAIL_VALIDATION_MESSAGE.toString()},showConvertFormsCard:!1,expandedSectionIDs:new Set()}};b=a;g["default"]=b},98);
__d("AdsMessengerPartialAutomatedCreationStateDataProvider",["AdsMessengerPartialAutomatedCreationStateDataProviderPlugin","Laminar"],function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsMessengerPartialAutomatedCreationStateDataProviderPlugin"),"AdsMessengerPartialAutomatedCreationStateDataProviderPlugin")},null);
__d("AdsMessengerPartialAutomatedCreationStateDataReducerPlugin",[],function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return{additionalQuestionItems:b.additionalQuestionItems,confirmationAttachment:b.confirmationAttachment,confirmationCTA:b.confirmationCTA,confirmationMessage:b.confirmationMessage,customInvalidTextFields:b.customInvalidTextFields,disqualifyMessage:b.disqualifyMessage,followUpMessage:b.followUpMessage,hopAppSetting:b.hopAppSetting,introMessage:b.introMessage,questionsCompleteMessage:b.questionsCompleteMessage,privacyURL:b.privacyURL,questionItems:b.questionItems,reminderText:b.reminderText,showConvertFormsCard:b.showConvertFormsCard,stopQuestionMessage:b.stopQuestionMessage,expandedSectionIDs:b.expandedSectionIDs}}};b=a;f["default"]=b},66);
__d("AdsMessengerPartialAutomatedCreationStateDataAction",["AdsMessengerPartialAutomatedCreationStateDataProvider","AdsMessengerPartialAutomatedCreationStateDataReducerPlugin","Laminar"],function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsMessengerPartialAutomatedCreationStateDataReducerPlugin"),b("AdsMessengerPartialAutomatedCreationStateDataProvider"),{},"")]},function(){return[]},"ADS_MESSENGER_PARTIAL_AUTOMATED_CREATION_STATE_DATA");e.exports=a},null);
__d("AdsUEditorAdgroupUnsetPageWelcomeMessageDataAction",["Laminar","ifRequired_FOR_LAMINAR_CODEGEN"],function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("ifRequired_FOR_LAMINAR_CODEGEN")("AdsUEditorAdgroupUnsetPageWelcomeMessageReducerPlugin",function(a){return b("ifRequired_FOR_LAMINAR_CODEGEN")("AdsCFAdgroupDataProvider",function(c){return b("Laminar").__createReducer(a,c,{},"")})})]},function(){return[]},"ADS_ADGROUP_EDITOR_UNSET_PAGE_WELCOME_MESSAGE");e.exports=a},null);
__d("MessengerMessageActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAction=function(a){this.$1.action=a;return this};c.setAppID=function(a){this.$1.appid=a;return this};c.setAppversion=function(a){this.$1.appversion=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setContainermodule=function(a){this.$1.containermodule=a;return this};c.setCountry=function(a){this.$1.country=a;return this};c.setEntryPoint=function(a){this.$1.entry_point=a;return this};c.setErrorText=function(a){this.$1.error_text=a;return this};c.setExtra=function(a){this.$1.extra=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setGroupSize=function(a){this.$1.group_size=a;return this};c.setMessageType=function(a){this.$1.message_type=a;return this};c.setMid=function(a){this.$1.mid=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setOfflineThreadid=function(a){this.$1.offline_threadid=a;return this};c.setPreviousReaction=function(a){this.$1.previous_reaction=a;return this};c.setReaction=function(a){this.$1.reaction=a;return this};c.setRecipientID=function(a){this.$1.recipient_id=a;return this};c.setThreadType=function(a){this.$1.thread_type=a;return this};c.setThreadid=function(a){this.$1.threadid=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={action:!0,appid:!0,appversion:!0,clienttime:!0,containermodule:!0,country:!0,entry_point:!0,error_text:!0,extra:!0,group_size:!0,message_type:!0,mid:!0,name:!0,offline_threadid:!0,previous_reaction:!0,reaction:!0,recipient_id:!0,thread_type:!0,threadid:!0};f["default"]=a},66);
__d("MessageReactionMutation_facebookRelayOperation",[],function(a,b,c,d,e,f){e.exports="4912183478817108"},null);
__d("MessageReactionMutation.graphql",["MessageReactionMutation_facebookRelayOperation"],function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessageReactionResponsePayload",kind:"LinkedField",name:"message_reaction",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MessageReactionMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MessageReactionMutation",selections:c},params:{id:b("MessageReactionMutation_facebookRelayOperation"),metadata:{},name:"MessageReactionMutation",operationKind:"mutation",text:null}}}();e.exports=a},null);
__d("AdsMessengerVisualEditorCreateNewType",[],function(a,b,c,d,e,f){"use strict";a=Object.freeze({WELCOME_MESSAGE:"welcome_message",CTM_LEAD_GEN:"ctm_lead_gen",FOLLOW_UP:"follow_up"});f["default"]=a},66);
__d("AdsApiLeadGenEndComponentButtonType",[],function(a,b,c,d,e,f){a=Object.freeze({VIEW_WEBSITE:"VIEW_WEBSITE",CALL_BUSINESS:"CALL_BUSINESS",MESSAGE_BUSINESS:"MESSAGE_BUSINESS",DOWNLOAD:"DOWNLOAD",SCHEDULE_APPOINTMENT:"SCHEDULE_APPOINTMENT",VIEW_ON_FACEBOOK:"VIEW_ON_FACEBOOK"});f["default"]=a},66);
__d("MessengerAdsPartialAutomatedStepDataManager",["AdsApiLeadGenEndComponentButtonType","AdsMessengerPartialAutomatedCreationTypes","AdsMessengerVisualEditorCreateNewType","AdsUtils","ContextualConfigValidators","MessengerAdsPartialAutomatedQuestionStrings","ads-lib-urllib","adsAccountGK"],function(a,b,c,d,e,f,g){"use strict";var h=10;function i(a){return{step_id:0,message:a.text,media_type:a.media_type,media_content:a.media_content,step_type:"INTRO",reply_type:"NONE",next_step_ids:["1"],crm_field_id:null}}function j(a){if(a==null)return null;var b=a.ctaType;if(b==null)return null;(b===d("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationCTAType.VIEW_WEBSITE||b===d("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationCTAType.DOWNLOAD)&&(a.ctaContent=c("ads-lib-urllib").normalize(a.ctaContent));b=c("AdsApiLeadGenEndComponentButtonType")[b];return b==null?null:{cta_type:b,cta_text:(b=a==null?void 0:a.ctaText)!=null?b:"",cta_content:(b=a==null?void 0:a.ctaContent)!=null?b:""}}function k(a,b,c,d,e){return{step_id:b,message:a.text,media_type:a.media_type,media_content:a.media_content,step_type:d!=null?"POST_LEAD_TRANSITION":"CONFIRMATION",reply_type:"NONE",next_step_ids:d!=null?[String(d)]:[],crm_field_id:null,cta:(b=j(c))!=null?b:void 0,offer_code_file_id:e==null?void 0:e.offerCodeFileID,offer_code:e==null?void 0:e.offerNonUniqueCodeValue,offer_code_format:e==null?void 0:e.offerCodeFormat}}function l(a,b,c){return{step_id:b,message:a,media_type:"text",step_type:"CONFIRMATION",reply_type:"NONE",next_step_ids:[],crm_field_id:null,cta:(b=j(c))!=null?b:void 0}}function m(a,b){return{step_id:b,message:a,media_type:"text",step_type:"SUMMARY",reply_type:"TEXT",next_step_ids:[String(b+1)],crm_field_id:null}}function n(a,b){return{step_id:b,message:a,media_type:"text",step_type:"DISQUALIFY",reply_type:"NONE",crm_field_id:null}}function o(a,b,c,e,f,g){var h=a.answers&&a.answers.length>0?a.answers.map(function(a){switch(a.nextStep){case d("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationGoToOption.CONFIRMATION_MESSAGE:return String(c);case d("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationGoToOption.DISQUALIFY_MESSAGE:return String(c+1);case d("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationGoToOption.NEXT_QUESTION:return String(b+2)}}):[String(b+2)],i=[],j=[],k=[],l="TEXT",m="NONE",n="QUESTION",o=a.answerValidationEnabled,p=null;switch(a.answerType){case d("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationNonPrefillAnswer.MULTIPLE_CHOICE:case d("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationNonPrefillAnswer.CALL_PREFERENCE:l=a.answerType===d("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationNonPrefillAnswer.CALL_PREFERENCE?"CALL_PREFERENCE":"QUICK_REPLIES";i=a.answers&&a.answers.map(function(a){return a.value});j=a.optionsFormat==="carousel"?a.answers&&a.answers.map(function(a){return{value:a.value,media_content:a.mediaContent}}):[];k=a.answers&&a.answers.map(function(a){return a.fieldID});break;case"FULL_ADDRESS":case"ZIP_CODE":case"PHONE":l="PREFILL";m=a.answerType;g&&(p=String(c+1));break;case"CITY":case"STATE":case"COUNTRY":case"EMAIL":case"JOB_TITLE":case"COMPANY_NAME":case"GENDER":case"DOB":case"FULL_NAME":case"FIRST_NAME":case"LAST_NAME":case"WORK_EMAIL":case"MILITARY_STATUS":l="PREFILL";m=a.answerType;break;case d("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationNonPrefillAnswer.CUSTOM:a.questionMessage===d("MessengerAdsPartialAutomatedQuestionStrings").getMessageByAnswerTypeAndNumber(a.answerType,1).toString()&&(l="NONE",n="INFO");break;default:break}g=null;if((f==null?void 0:f.isCustomOn)===!0)switch(a.answerType){case d("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationNonPrefillAnswer.MULTIPLE_CHOICE:g=f.multipleChoiceText;break;case"EMAIL":g=f.emailText;break;case"PHONE":g=f.phoneText;break;case"WORK_EMAIL":g=f.workEmailText;break;default:break}return{step_id:b+1,step_type:n,reply_type:l,prefill_type:m,message:a.questionMessage,media_type:"text",options_format:a.optionsFormat,answers:i,carousel_answers:j,answer_crm_field_ids:k,next_step_ids:h,next_step_on_disqualification_id:p,crm_field_id:a.fieldID===""?null:a.fieldID,answer_validation_enabled:o,optional_question_enabled:e||a.optionalQuestionEnabled,allow_to_skip:a.optionalQuestionEnabled,qualifying_answers_list:(f=a.qualifyingAnswersList)==null?void 0:f.split(","),invalid_reply_text:g}}function p(a){return!a.answers?!1:a.answers.some(function(a){return a.nextStep===d("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationGoToOption.DISQUALIFY_MESSAGE||a.nextStep===d("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationGoToOption.CONFIRMATION_MESSAGE})}function a(){return h}function b(){return h}function e(a,b,d,e,f,g,h,j,u,v,w,x,y,z,A,B,C,D,E,F,G,H){var I=1,J=[];b=t(b,A);var K=r(b,A),L=!1,M=b.length+1;if(a!=null&&a.text!==""){A=i(a);I=A.step_id;J.push(A)}b.forEach(function(a,b){J.push(o(a,b,M,L,C,K)),L=L||p(a)});G!=null&&(J.push(m(G,M)),M+=1);a=e.length>0;J.push(k(d,M,D,a?M+1+K:null,E));K&&J.push(n(g,M+1));a&&(e.forEach(function(a,b){J.push(o(a,J.length-1,M,L,C,K)),L=L||p(a)}),J.push(l(f,J.length,D)));var N;h&&(N={schedule_time:h.schedule_time,text:h.text,media_type:h.media_type,media_content:h.media_content,button_label:h.button_label,button_destination:h.button_destination,app_id:h.app_id,website_url:h.website_url});A=B!=null&&B.toggle?B.appID:null;b=s(F);return{first_step_id:I,privacy_url:u===c("AdsMessengerVisualEditorCreateNewType").FOLLOW_UP?"www.example.com":x,step_list:J,is_preview:v,reminder_text:j,follow_up_message:N,partial_automated_type:u,account_id:w,stop_question_message:y,handover_app_id:A,handover_summary:q(B),block_send_api:z,tracking_parameters:b,template_name:(G=H)!=null?G:null}}function q(a){return a==null||!a.toggle?null:a.summary!=null?a.summary:!0}function r(a,b){return a.some(function(a){return a.answerType==="ZIP_CODE"&&a.qualifyingAnswersList!=null&&a.qualifyingAnswersList.length>0||a.answers&&a.answers.some(function(a){return a.nextStep===d("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationGoToOption.DISQUALIFY_MESSAGE})||c("adsAccountGK")._(b,"1XP85qam9")&&a.answerType==="PHONE"})}function s(a){return a!=null?JSON.stringify(a.reduce(function(a,b){var c=b.key;b=b.value;c=c.trim();b=b.trim();d("ContextualConfigValidators").isNonEmptyString(c)&&d("ContextualConfigValidators").isNonEmptyString(b)&&(a[c]=b);return a},{})):null}function t(a,b){var e=[];a.forEach(function(a){if(a.answerType===d("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationNonPrefillAnswer.CALL_PREFERENCE||a.answerType==="PHONE"&&c("adsAccountGK")._(b,"1XP85qam9")){var f=d("AdsUtils").clone(a);f.questionMessage=d("MessengerAdsPartialAutomatedQuestionStrings").getMessageByAnswerTypeAndNumber(a.answerType,1).toString();f.answerType=d("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationNonPrefillAnswer.CUSTOM;f.answerValidationEnabled=!1;f.answers=[];f.optionalQuestionEnabled=!1;var g=d("AdsUtils").clone(a);g.questionMessage=d("MessengerAdsPartialAutomatedQuestionStrings").getMessageByAnswerTypeAndNumber(a.answerType,2).toString();e.push(f);e.push(g)}else e.push(a)});return e}g.getMaxQuestionNumber=a;g.getMaxOptionNumber=b;g.getPostData=e;g.hasDisqualify=r},98);
__d("XMessengerPartialAutomatedPreviewController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("/commerce/messenger_monetization/ctm_lead_gen/preview/",{page_welcome_message:{type:"String"},page_id:{type:"FBID"}})},null);
__d("XOfferUniqueCodesTemplateFileController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("/offers/v2/download/template/",{file_type:{type:"String",required:!0}})},null);
__d("MessengerAdsPartialAutomatedFormDataManager",["fbt","AdsGraphAPI","AdsInterfacesLogger","AdsMessengerPageWelcomeMessageDataManager","AdsMessengerPartialAutomatedCreationErrorDataAction","AdsMessengerPartialAutomatedCreationStateDataAction","AdsMessengerPartialAutomatedLoggerEvents","AdsMessengerVisualEditorUtils","AdsUEditorAdgroupSetExistingPostPageWelcomeMessageDataAction","AdsUEditorAdgroupSetPageWelcomeMessageDataAction","AsyncRequest","MessengerAdsPartialAutomatedStateManager","MessengerAdsPartialAutomatedStepDataManager","SimpleXUIDialog","XMessengerPartialAutomatedPreviewController","XOfferUniqueCodesTemplateFileController","promiseDone"],function(a,b,c,d,e,f,g,h){"use strict";function a(a,b,e){c("promiseDone")(d("AdsGraphAPI").get(f.id).object("id",a).batched().get({fields:"steps.fields(step_type,reply_type,prefill_type,message,media_content,media_type,options_format,answers,carousel_answers,answer_crm_field_ids,next_step_ids,crm_field_id,answer_validation_enabled,optional_question_enabled,invalid_reply_text,cta,allow_to_skip,qualifying_answers_list,next_step_on_disqualification_id),reminder_text,follow_up.fields(schedule_time,text,media_type,media_content,button_label,app_id),privacy_url,stop_question_message"}).then(function(a){return{steps:a.steps.data,reminder_text:a.reminder_text,follow_up:a.follow_up&&a.follow_up.data,privacy_url:a.privacy_url,stop_question_message:a.stop_question_message}}),function(a){a=d("MessengerAdsPartialAutomatedStateManager").getStateData(a.steps,a.reminder_text,a.follow_up,a.privacy_url,a.stop_question_message,b,e);c("AdsMessengerPartialAutomatedCreationStateDataAction").dispatch({additionalQuestionItems:a.additionalQuestionItems,confirmationAttachment:a.confirmationAttachment,confirmationCTA:a.confirmationCTA,confirmationMessage:a.confirmationMessage,customInvalidTextFields:a.customInvalidTextFields,disqualifyMessage:a.disqualifyMessage,followUpMessage:a.followUpMessage,hopAppSetting:a.hopAppSetting,introMessage:a.introMessage,privacyURL:a.privacyURL,questionItems:a.questionItems,questionsCompleteMessage:a.questionsCompleteMessage,reminderText:a.reminderText,showConvertFormsCard:a.showConvertFormsCard,stopQuestionMessage:a.stopQuestionMessage,expandedSectionIDs:new Set()},{line:"99",module:"MessengerAdsPartialAutomatedFormDataManager.js"});e&&e.onConvertFormSuccess(a)},function(a){})}function b(a){var b=c("XOfferUniqueCodesTemplateFileController").getURIBuilder().setString("file_type","instore_discount_codes").getURI();new(c("AsyncRequest"))().setURI(b).setReadOnly(!0).setMethod("GET").setHandler(function(b){b!=null&&a(b.payload)}).send()}function e(a,b,e,g,h,i,j,k,m,o,p,q,r,s,t,u,v,w,x,y,z){b=d("MessengerAdsPartialAutomatedStepDataManager").getPostData(b,e,g,h,i,j,k,m,o,!0,p==null?void 0:p.account_id,q,r,s,p,t,u,x,y,z);c("promiseDone")(d("AdsGraphAPI").get(f.id).object("page",a).edge("messenger_lead_forms").post(b),function(b){n(b,a,o,v,w)},function(a){return l(a)})}function i(a,b,c,e,f,g,h,i,j,k,l,m,n,p,q,r,s,t,u,v,w,x,y,z,A,B){f=d("MessengerAdsPartialAutomatedStepDataManager").getPostData(f,g,h,m,l,i,j,n,q,!1,r==null?void 0:r.account_id,k,s,w,r,v,x,y,z,A,void 0,p);o(a,b,e,j,p,q,c,f,t,u,r==null?void 0:r.account_id,B)}function j(a,b,d,e){b=c("XMessengerPartialAutomatedPreviewController").getURIBuilder().setFBID("page_id",b).setString("page_welcome_message",a).getURI();new(c("AsyncRequest"))().setURI(b).setMethod("POST").setHandler(function(a){a.payload!=null?e&&e(a.payload):d()}).setErrorHandler(function(a){e&&e(a.getErrorDescriptionString()||"")}).send()}function k(a,b,e){e===void 0&&(e=function(){}),c("promiseDone")(d("AdsGraphAPI").get(f.id).object("page",a).edge("messenger_import_lead_forms").post({lead_form_id:b}),function(a){e(a.step_list_id,a.fields_omitted.length)},function(a){})}function l(a){a=a.error_user_msg!=null?a.error_user_msg:a.message;c("AdsMessengerPartialAutomatedCreationErrorDataAction").dispatch({errorMessage:a},{line:"321",module:"MessengerAdsPartialAutomatedFormDataManager.js"});c("AdsInterfacesLogger").log({eventName:d("AdsMessengerPartialAutomatedLoggerEvents").MPA_ERROR_CREATE_FORM});a=h._("Something went wrong while creating this template. Please try again later.").toString();var b=h._("Error al crear la plantilla").toString();d("SimpleXUIDialog").show(a,b)}function m(a,b,e,f,g,h,i,j,k,l){var m=d("AdsMessengerVisualEditorUtils").getStandardTemplateDefaultJSON(f);e=e.adgroupEditorContext.hostID;m.landing_screen_type=h;m.ctm_lead_gen_template_id=a.id;j===!1&&(m.is_visible=!1);c("AdsMessengerPageWelcomeMessageDataManager").createCustomTemplate(b,f,JSON.stringify(m),g,e,l,!1,k);h={hostID:e,adgroupIDs:b,pageWelcomeMessage:JSON.stringify(m)};k===!0?c("AdsUEditorAdgroupSetExistingPostPageWelcomeMessageDataAction").dispatch(h,{line:"376",module:"MessengerAdsPartialAutomatedFormDataManager.js"}):(i&&(h=babelHelpers["extends"]({},h,{followUpMessage:i})),c("AdsUEditorAdgroupSetPageWelcomeMessageDataAction").dispatch(h,{line:"386",module:"MessengerAdsPartialAutomatedFormDataManager.js"}))}function n(a,b,e,f,g){var h=d("AdsMessengerVisualEditorUtils").getStandardTemplateDefaultJSON(b);h.landing_screen_type=e;h.ctm_lead_gen_template_id=a.id;j(JSON.stringify(h),b,f,g);c("AdsInterfacesLogger").log({eventName:d("AdsMessengerPartialAutomatedLoggerEvents").MPA_SUCCUSS_PREVIEW_FORM})}function o(a,b,e,g,h,i,j,k,n,o,p,q){c("promiseDone")(d("AdsGraphAPI").get(f.id).object("page",e).edge("messenger_lead_forms").post(k),function(f){m(f,a,b,e,h,i,g,n,o,p),c("AdsInterfacesLogger").log({eventName:d("AdsMessengerPartialAutomatedLoggerEvents").MPA_SUCCUSS_CREATE_FORM,data:{message:q!=null&&JSON.stringify({convertedLeadFormID:q,finalStepListID:f.id}),objective:j}})},function(a){return l(a)})}g.fetchAndLoadLeadGenTemplate=a;g.fetchOfferCodeTemplateFileUrl=b;g.generatePreview=e;g.createForm=i;g.sendCTMLeadGenPreview=j;g.convertLeadForm=k},98);
__d("AdsRasLearnMoreTargetingOptionsContentFBT",["fbt"],function(a,b,c,d,e,f,g,h){a={LEAD_GENERATION_HELP_CENTER_CMS_ID:"1481110642181372",LEAD_GENERATION_TEXT:h._("Algunas opciones para rellenar la informaci\u00f3n autom\u00e1ticamente est\u00e1n limitadas para los anuncios relacionados con cr\u00e9ditos, empleos o viviendas.")};g.AdsRasLearnMoreTargetingOptionsContentFBT=a},98);
__d("AdsRegulatedCategoryLeadGenerationNoticeCard.react",["AdsRasLearnMoreTargetingOptionsContentFBT","AdsRegulatedCategoryNoticeCard.react","react"],function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(){return h.jsx(c("AdsRegulatedCategoryNoticeCard.react"),{category:"LEGAL_AND_POLICY",cmsID:d("AdsRasLearnMoreTargetingOptionsContentFBT").AdsRasLearnMoreTargetingOptionsContentFBT.LEAD_GENERATION_HELP_CENTER_CMS_ID,messageID:"ads_ras_hec_flow_lead_ads_card",text:d("AdsRasLearnMoreTargetingOptionsContentFBT").AdsRasLearnMoreTargetingOptionsContentFBT.LEAD_GENERATION_TEXT})}a.displayName=a.name+" [from "+f.id+"]";g.AdsRegulatedCategoryLeadGenerationNoticeCard=a},98);
__d("BizInboxAutotranslationContext",["react"],function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext({isAutotranslationCardAcknowledged:!1,isAutotranslationEnabled:!1,isFeatureAvailable:!1,businessLanguage:null,businessLanguageDisplayName:null,personLanguage:null,personLanguageDisplayName:null,displayedGroupID:null,setDisplayedGroupID:function(){},pageID:"",threadID:""});g["default"]=b},98);
__d("FBLikeSvgIcon.bs",["bs_caml_option","react","uniqueID"],function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.className,d=a.color,e=a.size;a=a.title;e=e!==void 0?e:"20";var f=a!==void 0?b("bs_caml_option").valFromOption(a):null;a=h.useState(function(){if(f===null)return;else return b("uniqueID")()});a=a[0];return h.jsxs("svg",{"aria-labelledby":a,viewBox:"0 0 16 16",height:e,width:e,className:c,children:[a!==void 0&&f!==null?h.jsx("title",{id:a,children:f}):null,h.jsx("path",{fill:d,d:"M16,9.1c0-0.8-0.3-1.1-0.6-1.3c0.2-0.3,0.3-0.7,0.3-1.2c0-1-0.8-1.7-2.1-1.7h-3.1c0.1-0.5,0.2-1.3,0.2-1.8 c0-1.1-0.3-2.4-1.2-3C9.3,0.1,9,0,8.7,0C8.1,0,7.7,0.2,7.6,0.4C7.5,0.5,7.5,0.6,7.5,0.7L7.6,3c0,0.2,0,0.4-0.1,0.5L5.7,6.6 c0,0-0.1,0.1-0.1,0.1l0,0l0,0L5.3,6.8C5.1,7,5,7.2,5,7.4v6.1c0,0.2,0.1,0.4,0.2,0.5c0.1,0.1,1,1,2,1h5.2c0.9,0,1.4-0.3,1.8-0.9 c0.3-0.5,0.2-1,0.1-1.4c0.5-0.2,0.9-0.5,1.1-1.2c0.1-0.4,0-0.8-0.2-1C15.6,10.3,16,9.9,16,9.1z"}),h.jsx("path",{fill:d,d:"M3.3,6H0.7C0.3,6,0,6.3,0,6.7v8.5C0,15.7,0.3,16,0.7,16h2.5C3.7,16,4,15.7,4,15.3V6.7C4,6.3,3.7,6,3.3,6z"})]})}c=a;f.make=c},null);
__d("withAbstractDraggableDataSource",["cssVar","cx","DOMDimensions","Draggable","Event","Keys","ReactDOM","Rect","getScrollPosition","getViewportDimensions","joinClasses","react"],function(a,b,c,d,e,f,g,h,i){var j=d("react"),k=parseInt("1024px",10);function a(a){return function(b){babelHelpers.inheritsLoose(e,b);function e(){var a,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(a=e=b.call.apply(b,[this].concat(g))||this,e.state={dragging:!1,width:null},e.$1=null,e.$2=null,e.$3=null,e.$4=function(){var a=e.props.item;a=(a.isMovable?"_58zo":"")+(e.state.dragging?" _58zp":"")+" _58z_"+(a.isMovable?"":" _58-6");return c("joinClasses")(a,"_58-8")},e.$6=function(){if(e.state.dragging)return;var a=d("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(e));if(a===null)return;e.$2=c("Event").listen(document,"keydown",function(a){a.keyCode===c("Keys").ESC&&(e.$9(),a.preventDefault())});var b=d("DOMDimensions").getElementDimensions(a);b=b.width;e.setState({dragging:!0,width:b});e.props.onGrab(e.props.item.id,a)},e.$7=function(){var a=d("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(e)),b=250;a=a.parentNode;a=new(c("Rect"))(a);var f=c("getViewportDimensions")(),g=c("getScrollPosition")(window),h=Math.max(f.width,k);h=new(c("Rect"))(g.y,Math.min(h,a.r+b),f.height+g.y,Math.max(0,a.l-b));e.$1&&e.$1.setBoundingBox(h);e.props.onDrag()},e.$8=function(){e.$10(),e.props.onDrop()},e.$11=function(a){e.$3=a},a)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f.$5=function(a){var b=d("ReactDOM").findDOMNode(this);a&&!this.$1&&this.$3!=null?this.$1=new(c("Draggable"))(b).setNamespace("AbstractDraggableList").setUseAbsolute(!0).setGrabHandler(this.$6).setDragHandler(this.$7).setDropHandler(this.$8).addHandle(d("ReactDOM").findDOMNode(this.$3)):!a&&this.$1&&(this.$1.active&&this.$9(),this.$1.destroy())};f.componentDidMount=function(){this.$5(this.props.item.isMovable||!1)};f.componentWillUnmount=function(){this.$5(!1)};f.UNSAFE_componentWillReceiveProps=function(a){this.$5(a.item.isMovable||!1)};f.$9=function(){this.$1&&this.$1.killDrag(),this.$10(),this.props.onCancelDrag()};f.$10=function(){this.$1&&this.$1.resetPosition(),this.setState({dragging:!1,width:null}),this.$2&&this.$2.remove(),delete this.$2};f.render=function(){return j.jsx(a,babelHelpers["extends"]({},this.props,this.state,{getRootClassName:this.$4,setRef:this.$11}))};return e}(j.Component)}g["default"]=a},98);
__d("MessengerViewer",["CurrentUser","react"],function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext(c("CurrentUser").getID());g["default"]=b},98);
__d("MessengerReactionStaticEmoji.react",["MessengerTextWithEmoticons.react","cr:1536284","gkx","react"],function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var d=a.reaction,e=a.isDefaultReaction;a=a.uri;return c("gkx")("1536285")&&b("cr:1536284")!=null?h.jsx(b("cr:1536284"),{reaction:d}):a!=null?c("MessengerTextWithEmoticons.react").renderEmoji(!1,d,d,!0,a):h.jsx(c("MessengerTextWithEmoticons.react"),{customSize:!0,forceMessengerEmoji:e,renderEmoticons:!0,renderEmoji:!0,text:d})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a},98);
__d("MessengerReactionsContextualDialog.react",["cx","AccessibleLayer","ContextualLayerAutoFlipHorizontal","ContextualLayerHideOnScrollOut","ContextualLayerUpdateOnScroll","LayerHideOnEscape","ReactAbstractContextualDialog","ReactLayer"],function(a,b,c,d,e,f,g,h){"use strict";a=d("ReactLayer").createClass(d("ReactAbstractContextualDialog").createSpec({addedBehaviors:[c("ContextualLayerAutoFlipHorizontal"),c("ContextualLayerHideOnScrollOut"),c("ContextualLayerUpdateOnScroll"),c("LayerHideOnEscape"),c("AccessibleLayer")],displayName:"MessengerReactionsContextualDialog",shouldSetARIAProperties:!1,theme:{wrapperClassName:"_4owc"}}));b=a;g["default"]=b},98);
__d("MessengerReactionNames",[],function(a,b,c,d,e,f){a=Object.freeze({LOVE:"love",HAHA:"haha",WOW:"wow",SAD:"sad",ANGRY:"angry",THUMBSUP:"thumbsup",THUMBSDOWN:"thumbsdown",SUPPORT:"support"});f["default"]=a},66);
__d("MessengerReactionsUtil.bs",["EmojiFormat.bs","MessengerReactionNames","bs_caml_obj","bs_js_dict","gkx"],function(a,b,c,d,e,f){"use strict";c=b("gkx")("1333897")?[10084,65039]:[128525];d=b("gkx")("1536285")?[{name:b("MessengerReactionNames").THUMBSUP,emojis:[128077]},{name:b("MessengerReactionNames").LOVE,emojis:[10084]},{name:b("MessengerReactionNames").SUPPORT,emojis:[129303]},{name:b("MessengerReactionNames").HAHA,emojis:[128518]},{name:b("MessengerReactionNames").WOW,emojis:[128558]},{name:b("MessengerReactionNames").SAD,emojis:[128546]},{name:b("MessengerReactionNames").ANGRY,emojis:[128544]}]:[{name:b("MessengerReactionNames").LOVE,emojis:c},{name:b("MessengerReactionNames").HAHA,emojis:[128518]},{name:b("MessengerReactionNames").WOW,emojis:[128558]},{name:b("MessengerReactionNames").SAD,emojis:[128546]},{name:b("MessengerReactionNames").ANGRY,emojis:[128544]},{name:b("MessengerReactionNames").THUMBSUP,emojis:[128077]},{name:b("MessengerReactionNames").THUMBSDOWN,emojis:[128078]}];var g={};d.forEach(function(a,c){g[b("EmojiFormat.bs").codeArrayToUnicode(a.emojis)]=c+1|0});function a(a,c){a=b("bs_js_dict").get(g,a);c=b("bs_js_dict").get(g,c);if(a!==void 0)if(c!==void 0)return a-c|0;else return-1;else if(c!==void 0)return 1;else return 0}e=d.map(function(a){return b("EmojiFormat.bs").codeArrayToUnicode(a.emojis)});var h=d.map(function(a){var c=a.name;return b("EmojiFormat.bs").codeArrayToUnicode(b("bs_caml_obj").caml_equal(c,b("MessengerReactionNames").LOVE)?[128151]:a.emojis)}),i=d.findIndex(function(a){return a.name===b("MessengerReactionNames").LOVE}),j=128151;f.loveEmojiCode=c;f.growingHeartEmojiCode=j;f.reactionsSortOrder=d;f.orderMap=g;f.sortFunction=a;f.defaultReactions=e;f.solidReactions=h;f.loveEmojiIndex=i},null);
__d("MessengerReactionsUtil.re",["MessengerReactionsUtil.bs"],function(a,b,c,d,e,f){c=(a=b("MessengerReactionsUtil.bs")).reactionsSortOrder;f.reactionsSortOrder=c;d=a.sortFunction;f.sortFunction=d;e=a.defaultReactions;f.defaultReactions=e;b=a.solidReactions;f.solidReactions=b;c=a.loveEmojiIndex;f.loveEmojiIndex=c},null);
__d("WebGraphQLMutationHelper",["CurrentUser","WebGraphQLLegacyHelper","XWebGraphQLMutationController","base62"],function(a,b,c,d,e,f,g){"use strict";var h=0;function a(a,b){return d("WebGraphQLLegacyHelper").getURI({controller:c("XWebGraphQLMutationController"),docID:a,variables:{input:babelHelpers["extends"]({client_mutation_id:c("base62")(h++),actor_id:c("CurrentUser").getID()},b)}})}g.getMutationURI=a},98);
__d("MessengerReactionsMenu.react",["cx","DOMContainer.react","Keys","MercuryIDs","MercuryThreadActions","MessageReactionMutation.graphql","MessengerMessageActionsTypedLogger","MessengerReactionStaticEmoji.react","MessengerReactionsContextualDialog.react","MessengerReactionsUtil.re","MessengerState.re","MessengerSupportedEmojiUtils","MessengerViewer","WebGraphQLMutationHelper","XAsyncRequest","getThreadTypeNameFromThreadType","nullthrows","objectValues","react"],function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=c("MercuryThreadActions").get(),k=function(a){var b=a.reaction,c=a.isCurrent;a=babelHelpers.objectWithoutPropertiesLoose(a,["reaction","isCurrent"]);return i.jsx("span",babelHelpers["extends"]({role:"option",tabIndex:"0",className:"_1z8r"+(c?" _5-2b":""),"aria-selected":c,"aria-label":b,id:b},a))};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.state={animations:{},reactions:d("MessengerReactionsUtil.re").defaultReactions.map(function(a){return{name:a}})},e.$4=function(a){a||e.props.onHide()},e.$6=function(a){return function(b){b=b.charCode;b===c("Keys").RETURN&&e.$5(a)}},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.componentDidMount=function(){this.$2()};e.UNSAFE_componentWillReceiveProps=function(){this.$2()};e.componentWillUnmount=function(){c("objectValues")(this.state.animations).forEach(function(a){a.renderer&&typeof a.renderer.pause==="function"&&a.renderer.pause()}),this.$1&&this.$1.cancel()};e.$2=function(){var a=d("MessengerState.re").getThreadMetaNow(this.context,this.props.message.thread_id);a=a==null?void 0:a.reactions;if(a){this.setState({reactions:a.map(function(a){return{name:a.reactionEmoji,uri:a.staticAssetUri}})});return}a=this.$3().slice();this.setState({reactions:a.map(function(a){return{name:a}})})};e.render=function(){var a=this,b=this.context,e=this.props.message.reactions&&this.props.message.reactions[b];b=d("MessengerState.re").getThreadMetaNow(this.context,this.props.message.thread_id);var f=(b==null?void 0:b.theme_id)||"";return i.jsx(c("MessengerReactionsContextualDialog.react"),{alignment:"center",contextRef:this.props.refProp,"data-testid":void 0,shown:!0,onBlur:this.props.onHide,onToggle:this.$4,children:i.jsxs("div",{role:"listbox","aria-orientation":"horizontal",className:"_1z8q _fy2",children:[this.state.reactions.map(function(b,d){var g=b.name;d=f+g;var h=a.$3().includes(g),j=function(){return a.$5(g)};d=a.state.animations[d]?i.jsx(c("DOMContainer.react"),{children:a.state.animations[d].element}):i.jsx(c("MessengerReactionStaticEmoji.react"),{reaction:g,isDefaultReaction:h,uri:b.uri});return i.jsx(k,{reaction:g,isCurrent:g===e,onClick:j,onKeyPress:a.$6(g),children:d},g)}),this.$7()]})})};e.$3=function(){return this.props.isSolidReaction===!0?d("MessengerReactionsUtil.re").solidReactions:d("MessengerReactionsUtil.re").defaultReactions};e.$8=function(a){return!this.$3().includes(a)?d("MessengerSupportedEmojiUtils").getSupportedEmojiKey(a):a};e.$7=function(){return null};e.$9=function(){j.markRead(this.props.message.thread_id),j.markSeen(this.props.message.thread_id)};e.$5=function(a){var b=this,e=this.props,f=e.message,g=e.entryPoint,h=this.context,i=f.reactions&&f.reactions[h],j=d("MessengerState.re").getServerMessageID(h,f.message_id);e=d("WebGraphQLMutationHelper").getMutationURI(c("nullthrows")(c("MessageReactionMutation.graphql").params.id),{action:a===i?"REMOVE_REACTION":"ADD_REACTION",message_id:j,actor_id:h,reaction:a});var k=function(e){var k=f.other_user_fbid||f.thread_fbid,l=d("MessengerState.re").getThreadMetaNow(h,f.thread_id),m=l&&l.participants?l.participants.length:0;l=c("getThreadTypeNameFromThreadType")(l&&l.thread_type);var n=f.attachments[0];m=new(c("MessengerMessageActionsTypedLogger"))().setAction("reaction").setOfflineThreadid(f.offline_threading_id).setMid(j).setRecipientID(d("MercuryIDs").getUserIDFromParticipantID(f.author)).setEntryPoint(g).setReaction(b.$8(a)).setPreviousReaction(b.$8(i)).setGroupSize(m).setThreadType(l).setThreadid(k);e.errorSummary!=null&&(m=m.setErrorText(e.errorSummary.toString()));n!=null&&(m=m.setMessageType(n.attach_type));m.log();b.$9()};new(c("XAsyncRequest"))(e).setMethod("POST").setHandler(k).send();this.props.onHide()};return b}(i.Component);a.contextType=c("MessengerViewer");g["default"]=a},98);
__d("MessengerReactIconSVGM4React.re",["MessengerReactIconSVGM4React.bs"],function(a,b,c,d,e,f){a=b("MessengerReactIconSVGM4React.bs").make;f.make=a;c=b("MessengerReactIconSVGM4React.bs").makeSolid;f.makeSolid=c},null);
__d("WorkChatRedesignedMessageListCheck.bs",["CurrentUser","MessengerEnvironment","gkx"],function(a,b,c,d,e,f){"use strict";a=b("gkx")("895574")&&b("CurrentUser").isWorkUser()&&b("MessengerEnvironment").messengerui;f.enabled=a},null);
__d("WorkChatRedesignedMessageListCheck.re",["WorkChatRedesignedMessageListCheck.bs"],function(a,b,c,d,e,f){a=b("WorkChatRedesignedMessageListCheck.bs").enabled;f.enabled=a},null);
__d("MessengerReactionsPrompt.react",["cssVar","cx","fbt","ix","ChatOptions","ChatSidebarDropdownConstants","CurrentUser","Image.react","MessengerDotComAndInboxM4Check.re","MessengerReactIconSVGM4React.re","MessengerReactionsMenu.react","WorkChatRedesignedMessageListCheck.re","react","tooltipPropsFor"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={hover:!1,open:!1},c.$3=function(a){c.props.onReactionSwap&&(c.props.onReactionSwap(a),c.$4())},c.$1=function(a){a.stopPropagation()},c.$2=function(a){a.stopPropagation(),c.setState({open:!0},function(){return c.props.onShowMenu&&c.props.onShowMenu(c.state.open)}),c.props.setReactionsPromptShown&&c.props.setReactionsPromptShown(!0)},c.$4=function(){c.setState({open:!1},function(){return c.props.onShowMenu&&c.props.onShowMenu(c.state.open)}),c.props.setReactionsPromptShown&&c.props.setReactionsPromptShown(!1)},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.render=function(){var a=this;if(this.props.isActive!==!0&&!this.state.open)return null;var b=null;if(this.props.isEdit===!0&&d("WorkChatRedesignedMessageListCheck.re").enabled){var e=this.state.hover||this.state.open?k("559624"):k("559623");b=l.jsx(c("Image.react"),{src:e})}else if(d("WorkChatRedesignedMessageListCheck.re").enabled){e=this.state.hover||this.state.open?k("895450"):k("895449");b=l.jsx(c("Image.react"),{src:e})}else if(this.props.isQuickAdd){e=k("278123");b=l.jsx(c("Image.react"),{src:e})}else if(c("CurrentUser").isWorkUser()){e=this.state.open?k("559649"):k("559648");b=l.jsx(c("Image.react"),{src:e})}else if(d("MessengerDotComAndInboxM4Check.re").yes)b=d("MessengerReactIconSVGM4React.re").make(this.state.hover?"black":"rgba(0, 0, 0, 0.34)");else{e=this.state.open?k("559646"):k("559647");b=l.jsx(c("Image.react"),{src:e})}e=j._("Reaccionar");var f=c("tooltipPropsFor")(e,"above",d("WorkChatRedesignedMessageListCheck.re").enabled?"right":"center");return l.jsxs("button",babelHelpers["extends"]({},f,{className:"_8sop"+(this.props.isQuickAdd?"":" _5zvq")+(d("MessengerDotComAndInboxM4Check.re").yes&&!this.props.isQuickAdd?" _7i2o":"")+(this.props.isQuickAdd?" _yav":""),onClick:this.state.open?this.$1:this.$2,onMouseEnter:function(b){return a.setState({hover:!0})},onMouseLeave:function(b){return a.setState({hover:!1})},"aria-hidden":"true",tabIndex:-1,"aria-label":e,"data-testid":void 0,ref:"button",children:[b,this.renderMenu()]}))};e.renderMenu=function(){var a=this;return!this.state.open?null:l.jsx(c("MessengerReactionsMenu.react"),{entryPoint:"awareness_plus",setUseSolidReaction:this.props.onReactionSwap&&this.$3,isSolidReaction:c("ChatOptions").getSetting(c("ChatSidebarDropdownConstants").SOLID_REACTION),message:this.props.message,onHide:this.$4,refProp:function(){return a.refs.button}})};return b}(l.Component);g["default"]=a},98);
__d("MercuryAttachmentLayoutTypeHelper",[],function(a,b,c,d,e,f){"use strict";function a(a){var b;return(a==null?void 0:(b=a.xma_layout_info)==null?void 0:b.layout_type)==="ADMIN"||(a==null?void 0:(b=a.share)==null?void 0:(a=b.xma_layout_info)==null?void 0:a.layout_type)==="ADMIN"}f.isAdminType=a},66);
__d("isMessengerMessageRemoved",[],function(a,b,c,d,e,f){"use strict";function a(a){return a.removed_timestamp!=null&&a.removed_timestamp!==0||a.attachments!=null&&a.attachments.length>0&&!!a.attachments[0].share&&!!a.attachments[0].share.style_list&&a.attachments[0].share.style_list.length>0&&a.attachments[0].share.style_list[0]==="globally_deleted_message_placeholder"}f["default"]=a},66);
__d("MessageReplyPermissions",["MNCommercePageSetting","MercuryAttachmentLayoutTypeHelper","MercuryConfig","MessagingTag","MessengerBotMenuDataFetcher","RepliedToMessageStatusForGraphQL","emptyFunction","getPageIDFromThreadID","isMessengerMessageRemoved"],function(a,b,c,d,e,f,g){"use strict";function a(a){var b=c("getPageIDFromThreadID")(a.thread_id);if(b!=null){b=c("MessengerBotMenuDataFetcher").getHasPageSetting(b,c("emptyFunction"),c("emptyFunction"),c("MNCommercePageSetting").COMPOSER_INPUT_DISABLED);if(b)return!1}if(a.folder===c("MessagingTag").PENDING||a.folder===c("MessagingTag").OTHER)return!1;return c("isMessengerMessageRemoved")(a)?!1:h(a)||i(a)}function b(a,b){return!b&&i(a)}function h(a){var b,c=a.log_message_type==="log:video-call"||a.log_message_type==="log:phone-call";if(c)return!1;c=a.attachments&&a.attachments.length>0?a.attachments[0]:null;if(d("MercuryAttachmentLayoutTypeHelper").isAdminType(c))return!1;if(c!==null&&((b=c.share)==null?void 0:b.style_list[0])==="rtc_call_log")return!1;b=c==null?void 0:c.attach_type;return!!a.body||b==="photo"||b==="video"||b==="sticker"||b==="third_party_sticker"||b==="animated_image"||a.attachments&&a.attachments.length>=1}function i(a){if(!c("MercuryConfig").SM3BD)return!1;if(a.status!==c("RepliedToMessageStatusForGraphQL").VALID)return!0;a=a.message;var b=a.attachments&&a.attachments.length===1&&a.attachments[0].attach_type;return!!a.body||c("MercuryConfig").RTPE&&b==="photo"||c("MercuryConfig").RTVE&&b==="video"||c("MercuryConfig").RTSE&&(b==="sticker"||b==="third_party_sticker")||c("MercuryConfig").RTGE&&b==="animated_image"||c("MercuryConfig").RTOAE&&a.attachments&&a.attachments.length>=1}g.canReplyToMessage=a;g.bubbleContainsRepliedToMessage=b;g.isRepliableMessage=h;g._canRenderM3RedesignReply=i},98);