if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("BusinessManagerNotificationsSubscription_facebookRelayOperation",[],function(a,b,c,d,e,f){e.exports="5012193668845976"},null);
__d("BusinessManagerNotificationsSubscription.graphql",["BusinessManagerNotificationsSubscription_facebookRelayOperation"],function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"},{defaultValue:!1,kind:"LocalArgument",name:"is_work_user"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],c=[{kind:"Variable",name:"data",variableName:"input"}],d={alias:null,args:null,kind:"ScalarField",name:"classifications",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"eligible_buckets",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"alert_id",storageKey:null},g={alias:"creation_time",args:null,kind:"ScalarField",name:"notif_sent_time",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"content_category",storageKey:null},i={kind:"Variable",name:"scale",variableName:"scale"},j=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],k={alias:"icon",args:[i],concreteType:"Image",kind:"LinkedField",name:"app_icon",plural:!1,selections:j,storageKey:null},l={alias:"notif_type",args:null,kind:"ScalarField",name:"notif_type_value",storageKey:null},m={alias:"previewImage",args:[{kind:"Literal",name:"height",value:48},i,{kind:"Literal",name:"width",value:75}],concreteType:"Image",kind:"LinkedField",name:"preview_image",plural:!1,selections:j,storageKey:null},n={alias:"primerAttributes",args:null,concreteType:"PrimerAttributes",kind:"LinkedField",name:"primer_attributes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ajaxify",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"rel",storageKey:null}],storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"seen_state",storageKey:null};i={alias:"thumbnail",args:[i,{kind:"Literal",name:"width",value:48}],concreteType:"Image",kind:"LinkedField",name:"notif_image",plural:!1,selections:j,storageKey:null};j={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};var p={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"renderer_data",plural:!1,selections:[j,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"beeper_time_to_hide",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bucket_data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bucket_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_render_in_tahoe",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_pre_live",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"owner_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sender_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_channel_caller",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_channel_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_id",storageKey:null}],type:"LiveVideoNotificationRendererData",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"exception_message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"exception_stacktrace",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"exception_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_notification_type",storageKey:null}],type:"NotificationExceptionNotificationRendererData",abstractKey:null}],storageKey:null},q=[{kind:"Literal",name:"location",value:"summary"}],r={alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},t={alias:null,args:null,concreteType:"AggregatedEntitiesAtRange",kind:"LinkedField",name:"aggregated_ranges",plural:!0,selections:[r,s],storageKey:null},u={condition:"is_work_user",kind:"Condition",passingValue:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"WorkForeignEntityInfo",kind:"LinkedField",name:"work_foreign_entity_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null}],type:"WorkForeignEntity",abstractKey:"__isWorkForeignEntity"}]},v={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"tracking",storageKey:null},x={alias:null,args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'},y=[{kind:"Literal",name:"notif_option_set_context",value:{client_action_types:["HIDE","UNSUB","MODSUB","SAVE_ITEM","UNSAVE_ITEM","REPORT_BUG","OPEN_IN_INSPECTOR"],supported_display_styles:[{option_display_styles:["CHEVRON_MENU_OPTION","POPUP_MENU_OPTION"],option_set_display_style:"CHEVRON_MENU"}]}}],z={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"action_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"undo_server_action",storageKey:null}],type:"TypeOnlyNotifOptionClientAction",abstractKey:null},A={alias:null,args:null,kind:"ScalarField",name:"server_action",storageKey:null},B=[v],C=[s,r];B={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"text",plural:!1,selections:B,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtext",plural:!1,selections:B,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"undo_text",plural:!1,selections:[{alias:null,args:null,concreteType:"AggregatedEntitiesAtRange",kind:"LinkedField",name:"aggregated_ranges",plural:!0,selections:C,storageKey:null},{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:C,storageKey:null},v],storageKey:null}],type:"GenericNotifOptionRowDisplay",abstractKey:null};C={alias:"timestamp",args:null,concreteType:"CreationTimeWithRelativeText",kind:"LinkedField",name:"creation_time_with_relative_text",plural:!1,selections:[{alias:"time",args:null,kind:"ScalarField",name:"timestamp",storageKey:null},{alias:"text",args:null,kind:"ScalarField",name:"relative_timestamp_text",storageKey:null},{alias:"verbose",args:null,kind:"ScalarField",name:"verbose_timestamp_text",storageKey:null}],storageKey:null};var D={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"BusinessManagerNotificationsSubscription",selections:[{alias:null,args:c,concreteType:"WebNotificationReceiveSubscribeResponsePayload",kind:"LinkedField",name:"web_notification_receive_subscribe",plural:!1,selections:[{alias:null,args:null,concreteType:"Notification",kind:"LinkedField",name:"aggregated_notification",plural:!1,selections:[d,e,f,g,h,k,l,m,n,o,i,p,{alias:null,args:q,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:[t,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[u],storageKey:null},s,r],storageKey:null},v],storageKey:'title(location:"summary")'},w,x,{alias:null,args:y,concreteType:"NotificationOptionSetsConnection",kind:"LinkedField",name:"notif_option_sets",plural:!1,selections:[{alias:null,args:null,concreteType:"NotificationOptionSetsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"NotifOptionSet",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"NotifOptionSetOptionsConnection",kind:"LinkedField",name:"notif_options",plural:!1,selections:[{alias:null,args:null,concreteType:"NotifOptionSetOptionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"NotifOption",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"client_info",plural:!1,selections:[z],storageKey:null},A,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"option_display",plural:!1,selections:[B],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'notif_option_sets(notif_option_set_context:{"client_action_types":["HIDE","UNSUB","MODSUB","SAVE_ITEM","UNSAVE_ITEM","REPORT_BUG","OPEN_IN_INSPECTOR"],"supported_display_styles":[{"option_display_styles":["CHEVRON_MENU_OPTION","POPUP_MENU_OPTION"],"option_set_display_style":"CHEVRON_MENU"}]})'},C],storageKey:null}],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"BusinessManagerNotificationsSubscription",selections:[{alias:null,args:c,concreteType:"WebNotificationReceiveSubscribeResponsePayload",kind:"LinkedField",name:"web_notification_receive_subscribe",plural:!1,selections:[{alias:null,args:null,concreteType:"Notification",kind:"LinkedField",name:"aggregated_notification",plural:!1,selections:[d,e,f,g,h,k,l,m,n,o,i,p,{alias:null,args:q,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:[t,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[j,u,{kind:"InlineFragment",selections:[D],type:"Node",abstractKey:"__isNode"}],storageKey:null},s,r],storageKey:null},v],storageKey:'title(location:"summary")'},w,x,{alias:null,args:y,concreteType:"NotificationOptionSetsConnection",kind:"LinkedField",name:"notif_option_sets",plural:!1,selections:[{alias:null,args:null,concreteType:"NotificationOptionSetsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"NotifOptionSet",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"NotifOptionSetOptionsConnection",kind:"LinkedField",name:"notif_options",plural:!1,selections:[{alias:null,args:null,concreteType:"NotifOptionSetOptionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"NotifOption",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"client_info",plural:!1,selections:[j,z],storageKey:null},A,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"option_display",plural:!1,selections:[j,B],storageKey:null},D],storageKey:null}],storageKey:null}],storageKey:null},D],storageKey:null}],storageKey:null}],storageKey:'notif_option_sets(notif_option_set_context:{"client_action_types":["HIDE","UNSUB","MODSUB","SAVE_ITEM","UNSAVE_ITEM","REPORT_BUG","OPEN_IN_INSPECTOR"],"supported_display_styles":[{"option_display_styles":["CHEVRON_MENU_OPTION","POPUP_MENU_OPTION"],"option_set_display_style":"CHEVRON_MENU"}]})'},C,D],storageKey:null}],storageKey:null}]},params:{id:b("BusinessManagerNotificationsSubscription_facebookRelayOperation"),metadata:{subscriptionName:"web_notification_receive_subscribe"},name:"BusinessManagerNotificationsSubscription",operationKind:"subscription",text:null}}}();e.exports=a},null);
__d("BusinessManagerNotificationsSubscription",["BaseGraphQLSubscription","BusinessManagerNotificationsSubscription.graphql","WebPixelRatio"],function(a,b,c,d,e,f,g){"use strict";var h,i="ADS_UNIFIED_NAV";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var e=c.prototype;e.getTopic=function(a){return"gqls/"+this.getSubscriptionName()+"/actor_id_"+a.businessUserID+"_environment_"+i};e.getQuery=function(){return h!==void 0?h:h=b("BusinessManagerNotificationsSubscription.graphql")};e.getQueryParameters=function(a){return{input:{environment:i},is_work_user:!1,scale:d("WebPixelRatio").get()}};return c}(c("BaseGraphQLSubscription"));g["default"]=a},98);
__d("BusinessManagerNotificationSubscriptions",["Arbiter","BizNotificationBucketingUtils","BusinessManagerNotificationsSubscription","BusinessUserConf","ChannelConstants","NotificationTokens","createNotificationSubscriptions","createObjectFrom","nullthrows"],function(a,b,c,d,e,f,g){"use strict";a=c("createNotificationSubscriptions")({subscribeToNotificationHides:function(a){return c("Arbiter").subscribe(d("ChannelConstants").getArbiterType("notification_hidden"),function(b,e){b=d("NotificationTokens").tokenizeIDs([e.obj.notif_id+""]);e=e.obj.state===1;a(c("createObjectFrom")(b,e))})},subscribeToNotificationReadnessUpdates:function(a){return c("Arbiter").subscribe(d("ChannelConstants").getArbiterType("notifications_read"),function(b,e){b=d("NotificationTokens").tokenizeIDs(e.obj.alert_ids);e=e.obj.new_state;a(c("createObjectFrom")(b,e))})},subscribeToNotificationSeenStateUpdates:function(a){return c("Arbiter").subscribe(d("ChannelConstants").getArbiterType("notifications_seen"),function(b,e){b=d("NotificationTokens").tokenizeIDs(e.obj.alert_ids);e=e.obj.new_state;a(c("createObjectFrom")(b,e))})},subscribeToRealtimeChannelNotifications:function(a){return c("BusinessUserConf").businessUserID!==null?c("BusinessManagerNotificationsSubscription").subscribe({businessUserID:String(c("nullthrows")(c("BusinessUserConf").businessUserID))},function(b){b=b.web_notification_receive_subscribe.aggregated_notification;a(b?[d("BizNotificationBucketingUtils").preProcessNodeForLiveSendBucketing(b)]:null,"BusinessManagerNotificationsPayloadPagelet")},{viewerID:String(c("nullthrows")(c("BusinessUserConf").businessUserID))}):null}});g["default"]=a},98);
__d("BusinessManagerGlobalNotificationSubscriptionsSubscription",["BusinessManagerNotificationSubscriptions"],function(a,b,c,d,e,f,g){"use strict";a=c("BusinessManagerNotificationSubscriptions").setup();g["default"]=a},98);
__d("BusinessManagerNotificationSync",["invariant","Arbiter","ChannelConstants","ifRequired","objectValues"],function(a,b,c,d,e,f,g,h){"use strict";var i=0;function j(){var a={endpointControllerName:"BusinessManagerNotificationsPayloadPagelet"},b;c("ifRequired")("NotificationStore",function(d){b=c("objectValues")(d.getAll(a))});if(b==null)return null;var d=b.map(function(a){return a.creation_time}).filter(Boolean);return d.length===0?null:Math.max.apply(Math,d)}function k(){var a=j();if(a==null)return;h(0,54190)}var l=null,m=0;function a(a){m++;(i===null||a>i)&&(i=a);l==null&&(l=c("Arbiter").subscribe(d("ChannelConstants").ON_INVALID_HISTORY,k));var b=!1;return{remove:function(){if(b===!0)return;l!=null||h(0,51);b=!0;m--;m===0&&(l.unsubscribe(),l=null)}}}g.setup=a},98);
__d("BusinessManagerGlobalNotificationSyncSubscription",["BusinessManagerNotificationSync","InitialServerTime"],function(a,b,c,d,e,f,g){"use strict";a=d("BusinessManagerNotificationSync").setup(d("InitialServerTime").serverTime);g["default"]=a},98);