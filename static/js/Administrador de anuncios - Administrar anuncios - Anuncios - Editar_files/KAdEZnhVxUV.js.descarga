if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("IsReactComposerTypedLogger",["Banzai","GeneratedLoggerUtils"],function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:IsReactComposerLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:IsReactComposerLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:IsReactComposerLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setIsReactComposer=function(a){this.$1.is_react_composer=a;return this};return a}();c={is_react_composer:!0};f["default"]=a},66);
__d("AdsPill.react",["cx","joinClasses","prop-types","react"],function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsx("span",babelHelpers["extends"]({},this.props,{className:c("joinClasses")(this.props.className,"_3aqo"+(this.props.display==="inline"?" _1b1w":"")),children:this.props.children}))};return b}(i.Component);a.propTypes={display:c("prop-types").oneOf(["block","inline"])};a.defaultProps={display:"block"};g["default"]=a},98);
__d("AddUrlPillContainer.react",["cx","fbt","AdsPill.react","react"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=i._("A\u00f1adir enlace");return j.jsx(c("AdsPill.react"),{className:"_3xa8",children:a})};return b}(j.Component);a.propTypes={};g["default"]=a},98);
__d("XCarouselPageComposerEliminateInvalidImageController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("/composer/carouselinvalidupload/",{__asyncDialog:{type:"Int"},eliminate_invalid_images:{type:"Bool",defaultValue:!1},exceed_max_number_images:{type:"Bool",defaultValue:!1}})},null);
__d("ChildAttachmentsController",["csx","fbt","Arbiter","AsyncDialog","AsyncRequest","Bootloader","CSS","ComposerXController","DOM","IsReactComposerTypedLogger","JSXDOM","PagesComposerActionsLogger","PagesComposerCarouselPostChildAttachmentAttributes","PagesComposerCarouselPostLogAttributes","PagesComposerPostActionsLoggerEvent","Parent","ReactComposerScrapedAttachmentActions","Run","URI","XCarouselPageComposerEliminateInvalidImageController","XUIError","ads-lib-urllib","isTruthy","sprintf"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=1024,k=null,l=[],m=null,n=null,o=null,p=null,q=null;a=null;var r=null,s=!1,t=!1,u="",v=null,w=null,x=!1,y=null,z=null,A=null,B=!1,C=null,D=null,E=null,F=null,G=!1,H="",I=[],J=!0,K={SUMMARY:"summary",TITLE:"title",init:function(b,e,f,g){k=d("Parent").bySelector(b,"._4tbq"),m=b,n=e,l=f,a=g,r=a.change_time,s=a.eliminate_invalid_images,t=a.exceed_maximum_number_images,u=a[c("PagesComposerCarouselPostLogAttributes").SCRAPED_URL],v=a.target_id,y=a.is_react_composer,z=a.composer_id,A=a.check_image_consistency,D=a[c("PagesComposerCarouselPostLogAttributes").SCRAPED_TIME],E=a[c("PagesComposerCarouselPostLogAttributes").COMPOSER_LOCATION],F=!1,G=a.image_cta,H=a.title,I=a.img_urls,J=a.can_edit_lpp,y&&K._setDOMReadyListenerInReactComposer(),K._initAllControllers(),d("Run").onLeave(function(){y&&C&&C.unsubscribe()})},_setDOMReadyListenerInReactComposer:function(){y&&z&&(C=c("Arbiter").subscribe(["react_composer_dom_ready/"+z.toString()],K._handleDOMReadyInReactComposer.bind(K)))},_handleDOMReadyInReactComposer:function(){B=!0,K._initAllControllers()},setupNux:function(a){w=a,K._checkChangeTimeAndDOMUpdateConsistent()&&!x&&(w.show(),x=!0)},getTargetID:function(){return v},getURL:function(){return u},_hideChild:function(a){if(!K._isIndexValid(a))return;l[a][c("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED]=0;K._setInputNode(a,c("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED,"0")},_unhideChild:function(a){if(!K._isIndexValid(a))return;l[a][c("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED]=1;K._setInputNode(a,c("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED,"1")},_setLppParam:function(a,b){var c=K.getSelectedIndices();c.length===0?K._setParentParam(a,b):K.setChildParam(c[0],a,b)},_setParentParams:function(a){K._setParentParam(c("PagesComposerCarouselPostChildAttachmentAttributes").NAME,K.getTitle(a)),K._setParentParam(c("PagesComposerCarouselPostChildAttachmentAttributes").DESCRIPTION,K.getDescription(a))},_setParentParam:function(a,b){var d="";a===c("PagesComposerCarouselPostChildAttachmentAttributes").NAME?d=K.TITLE:a===c("PagesComposerCarouselPostChildAttachmentAttributes").DESCRIPTION&&(d=K.SUMMARY);a=c("DOM").scry(k,c("sprintf")('input[name="attachment[params][%s]"]',d))[0];a||(a=c("JSXDOM").input({name:c("sprintf")("attachment[params][%s]",d),type:"hidden"}),c("DOM").appendContent(k,a));a.value=b;a=c("DOM").scry(k,c("sprintf")('input[name="%s"]',"xc_share_"+d));a.length&&(a[0].value=b)},setChildParam:function(a,b,c){if(l.length<a)return;else if(a<0)return;l.length===a&&l.push({});l[a][b]=c;K._setInputNode(a,b,c)},unsetChildParam:function(a,b){if(!K._isIndexValid(a))return;delete l[a][b];a=c("sprintf")("attachment[params][child_attachments][%s][%s]",a,b);b=c("DOM").scry(k,c("sprintf")('input[name="%s"]',a))[0];b&&c("DOM").remove(b)},canEditLpp:function(){return J===null?!0:J},getChildParam:function(){return l},getChildNum:function(){return l.length},getValueFromDOM:function(a,b){a=c("sprintf")("attachment[params][child_attachments][%s][%s]",a,b);b=c("DOM").scry(k,c("sprintf")('input[name="%s"]',a))[0];return b?b.value:void 0},deleteChild:function(a){if(!K._isIndexValid(a))return;var b=l.length;for(;a<b;a++)K._deleteChild(a),a+1!==b&&K._copyChild(a+1,a)},addChild:function(a,b){var c=l.length;if(a<0||c<a)return;c=c;for(;c>a;c--)K._copyChild(c-1,c),K._deleteChild(c-1);K._setChild(a,b)},isVideoAttachment:function(a){a=l[a][c("PagesComposerCarouselPostChildAttachmentAttributes").VIDEO_ID];return c("isTruthy")(a)},registerLppJsInstance:function(a){o=a,K._checkChildAttachmentReady()&&K._initAllControllers()},registerCarouselJsInstance:function(a){p=a,K._checkChildAttachmentReady()&&K._initAllControllers()},registerUploadAreaJsInstance:function(a){q=a,K._checkChildAttachmentReady()&&K._initAllControllers()},_refreshImageClickRegister:function(){q&&q.refreshImageClickRegister()},_changePreviewDOMAfterDrag:function(a,b){var d=c("DOM").scry(m,"._5ya"),e=d[a];c("DOM").remove(e);a>b?c("DOM").insertBefore(d[b],e):c("DOM").insertAfter(d[b],e);if(!p)return;p.changeChildrenOrder(a,b);if(!o)return;o.changeLPPPreviewOrder(a,b)},handleImageDragEvent:function(a,b){if(a===b)return;var d=JSON.stringify(K.getChildParam()[a]);K.deleteChild(a);K.addChild(b,JSON.parse(d));K._refreshImageClickRegister();K._changePreviewDOMAfterDrag(a,b);K._refreshRendering();K._log(c("PagesComposerPostActionsLoggerEvent").IMAGE_DRAG)},handleImageChangeEvent:function(a,b){K._hideChild(a),K._unhideChild(b),K._refreshRendering(),K._log(c("PagesComposerPostActionsLoggerEvent").IMAGE_CHANGE_LEFT_RIGHT)},handleImageSelectEvent:function(a){var b=K.getSelectedNum();K._unhideChild(a);K._hasPlaceholderAttachment()||(b===0?K._refreshLppPreview():b===1&&K._lppToCarousel());K._refreshRendering();K._informCarouselCardChange();K._checkIfPreviewReadyToPublish();K._log(c("PagesComposerPostActionsLoggerEvent").IMAGE_SELECT)},handleUploadAreaImageUnSelectEvent:function(a){K._handleImageUnSelectEvent(a),K._informCarouselCardChange(),K._log(c("PagesComposerPostActionsLoggerEvent").IMAGE_UNSELECT_ON_UPLOAD_BAR)},handleLppPreviewImageUnSelectEvent:function(a){K._handleImageUnSelectEvent(a),K._log(c("PagesComposerPostActionsLoggerEvent").IMAGE_UNSELECT_ON_LPP_CARD)},handleCarouselPreviewImageUnSelectEvent:function(a){K._handleImageUnSelectEvent(a),K._informCarouselCardChange(),K._log(c("PagesComposerPostActionsLoggerEvent").IMAGE_UNSELECT_ON_CAROUSEL_CARD)},handleCarouselTitleChangeEvent:function(a,b){K.setChildParam(a,c("PagesComposerCarouselPostChildAttachmentAttributes").NAME,b),c("ReactComposerScrapedAttachmentActions").linkTitleEdited(z,a,b),K._log(c("PagesComposerPostActionsLoggerEvent").CAROUSEL_TITLE_EDIT)},handleCarouselDescriptionChangeEvent:function(a,b){K.setChildParam(a,c("PagesComposerCarouselPostChildAttachmentAttributes").DESCRIPTION,b),c("ReactComposerScrapedAttachmentActions").linkDescriptionEdited(z,a,b),K._log(c("PagesComposerPostActionsLoggerEvent").CAROUSEL_DESCRIPTION_EDIT)},_isImageOriginal:function(a){if(I===null)return!1;a=l[a][c("PagesComposerCarouselPostChildAttachmentAttributes").PICTURE];return I.includes(a)},_defaultToOriginalImageAndTitle:function(){if(K.canEditLpp())return;var a=K.getSelectedIndices();if(a.length!==0&&!K._isImageOriginal(a[0])){var b=!1;K._hideChild(a[0]);for(var d=0;d<l.length;d++)if(K._isImageOriginal(d)){b=!0;K._unhideChild(d);break}b||K._unhideChild(a[0])}H!==null&&K._setLppParam(c("PagesComposerCarouselPostChildAttachmentAttributes").NAME,H)},handleLppTitleChangeEvent:function(a){K._setLppParam(c("PagesComposerCarouselPostChildAttachmentAttributes").NAME,a),K._log(c("PagesComposerPostActionsLoggerEvent").LPP_TITLE_EDIT)},handleLppDescriptionChangeEvent:function(a){K._setLppParam(c("PagesComposerCarouselPostChildAttachmentAttributes").DESCRIPTION,a),K._log(c("PagesComposerPostActionsLoggerEvent").LPP_DESCRIPTION_EDIT)},_handleImageUnSelectEvent:function(a){K._hideChild(a);var b=K.getSelectedNum();K._hasPlaceholderAttachment()||(b===0?(o&&o.closeImage(a),c("ReactComposerScrapedAttachmentActions").setNoImagePreviewEdit(z,a),K._setParentParams(a)):b===1&&K._carouselToLpp());K._refreshRendering();K._checkIfPreviewReadyToPublish()},handleEditCTATypeEvent:function(a,b){if(!K._isIndexValid(a))return;K.setChildParam(a,c("PagesComposerCarouselPostChildAttachmentAttributes").CTA_TYPE,b)},handleEditUrlEvent:function(a,b){if(!K._isIndexValid(a))return;K.setChildParam(a,c("PagesComposerCarouselPostChildAttachmentAttributes").LINK,b);K._log(c("PagesComposerPostActionsLoggerEvent").EDIT_URL);K._refreshRendering();K._checkIfPreviewReadyToPublish()},handleEditAllUrlEvent:function(a){var b=K.getChildNum()-K.getPlaceholderIndices().length;for(var d=0;d<b;d++)K.handleEditUrlEvent(d,a);K._log(c("PagesComposerPostActionsLoggerEvent").EDIT_URL_APPLY_ALL);K._refreshRendering();K._checkIfPreviewReadyToPublish()},_informCarouselCardChange:function(){c("Arbiter").inform("carousel-composer/carousel_card_change")},_checkEliminateInvalidImages:function(){return s},_checkExceedMaximumNumberOfImages:function(){return t},_checkAddModalForEliminateInvalidImages:function(){if(K._checkEliminateInvalidImages()||K._checkExceedMaximumNumberOfImages()){var a=c("XCarouselPageComposerEliminateInvalidImageController").getURIBuilder().setBool("eliminate_invalid_images",K._checkEliminateInvalidImages()).setBool("exceed_max_number_images",K._checkExceedMaximumNumberOfImages()).getURI();new(c("AsyncRequest"))(a).send()}},_deleteChild:function(a){if(!K._isIndexValid(a))return;var b=l.length,d=Object.keys(c("PagesComposerCarouselPostChildAttachmentAttributes"));for(var e=0;e<d.length;e++){var f=c("PagesComposerCarouselPostChildAttachmentAttributes")[d[e]];K.unsetChildParam(a,f)}a===b-1&&l.pop()},_copyChild:function(a,b){if(a<0||l.length<=a)return;else if(b<0||l.length<b)return;if(b===a)return;b===l.length?l.push({}):l[b]={};K._setChild(b,l[a])},_setChild:function(a,b){if(l.length<a)return;else if(a<0)return;l.length===a&&l.push({});var d=Object.keys(c("PagesComposerCarouselPostChildAttachmentAttributes"));for(var e=0;e<d.length;e++){var f=c("PagesComposerCarouselPostChildAttachmentAttributes")[d[e]],g=b[f];g!=null&&K.setChildParam(a,f,g)}},_lppToCarousel:function(){K._refreshCarouselPreview(),K._hideLpp(),K._unhideCarousel(),K._informDragHandler()},_carouselToLpp:function(){K._refreshLppPreview(),K._hideCarousel(),K._unhideLpp(),K._informDragHandler()},_checkImageListEqual:function(a,b){if(a.length!==b.length)return-1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return 0;return 1},_getChildImageLinks:function(){var a=[];for(var b=0;b<l.length;b++)a.push(l[b].picture);return a},_checkImageConsistency:function(){if(o&&p&&q){var a=K._getChildImageLinks(),b=K._checkImageListEqual(a,o.getImageLinks()),d=K._checkImageListEqual(a,p.getImageLinks());a=K._checkImageListEqual(a,q.getImageLinks());var e=b===1&&d===1&&a===1;e||((b===0||d===0||a===0)&&K._log(c("PagesComposerPostActionsLoggerEvent").CHILD_IMAGES_LINK_INCONSISTENT),(b===-1||d===-1||a===-1)&&K._log(c("PagesComposerPostActionsLoggerEvent").CHILD_IMAGES_NUM_INCONSISTENT))}},_initAllControllers:function(){K._checkChangeTimeAndDOMUpdateConsistent()&&!F&&(K._initSetting(),K._refreshRendering(),K._checkIfPreviewReadyToPublish(),K._checkAddModalForEliminateInvalidImages(),A&&K._checkImageConsistency(),w&&!x&&(w.show(),x=!0),B=!1,F=!0)},_initSetting:function(){p&&p.initSetting()},_refreshRendering:function(){var a=K.getSelectedIndices();a.length>1?(K._hideLpp(),K._unhideCarousel(),K._refreshCarouselPreview()):a.length===1&&(K._hideCarousel(),K._unhideLpp(),K._refreshLppPreview());q&&(q.renderImageSelection(),q.updateScrollableArea())},_informDragHandler:function(){q&&q.updateScrollableArea()},_refreshCarouselPreview:function(){p&&p.render()},_refreshLppPreview:function(){K._defaultToOriginalImageAndTitle(),o&&o.render()},_hideLpp:function(){n&&d("CSS").hide(n)},_hideCarousel:function(){m&&d("CSS").hide(m)},_unhideLpp:function(){n&&d("CSS").show(n)},_unhideCarousel:function(){m&&d("CSS").show(m)},_setInputNode:function(a,b,d){a=c("sprintf")("attachment[params][child_attachments][%s][%s]",a,b);b=c("DOM").scry(k,c("sprintf")('input[name="%s"]',a))[0];b||(b=c("JSXDOM").input({name:a,type:"hidden"}),c("DOM").appendContent(k,b));b.value=d},getSelectedIndices:function(){var a=[];for(var b=0;b<l.length;b++)l[b][c("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED]&&a.push(b);return a},getSelectedNum:function(){var a=0;for(var b=0;b<l.length;b++)l[b][c("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED]&&a++;return a},getNonPlaceholderSelectedIndices:function(){var a=[];for(var b=0;b<l.length;b++)l[b][c("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED]&&l[b][c("PagesComposerCarouselPostChildAttachmentAttributes").IMAGE_SOURCE]!=="placeholder"&&a.push(b);return a},getFrontSelectedNum:function(a){var b=0;for(var c=0;c<a&&c<l.length;c++)K.isSelected(c)&&b++;return b},isSelected:function(a){return K._isIndexValid(a)?l[a][c("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED]!==0:!1},getPlaceholderIndices:function(){var a=[];for(var b=0;b<l.length;b++)l[b][c("PagesComposerCarouselPostChildAttachmentAttributes").IMAGE_SOURCE]==="placeholder"&&a.push(b);return a},getSelectedPlaceholderIndices:function(){var a=[];for(var b=0;b<l.length;b++)l[b][c("PagesComposerCarouselPostChildAttachmentAttributes").IMAGE_SOURCE]==="placeholder"&&l[b][c("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED]===1&&a.push(b);return a},isPlaceholder:function(a){if(!K._isIndexValid(a))return!1;a=K.getChildParam()[a];return a[c("PagesComposerCarouselPostChildAttachmentAttributes").IMAGE_SOURCE]==="placeholder"},_hasPlaceholderAttachment:function(){for(var a=0;a<l.length;a++)if(l[a][c("PagesComposerCarouselPostChildAttachmentAttributes").IMAGE_SOURCE]==="placeholder")return!0;return!1},hasFakeLink:function(a){return!K._isIndexValid(a)?!1:K.getLink(a)==="http://www.facebook.com/carousel_photo_composer_fake_url"},getDescription:function(a){return K._isIndexValid(a)?l[a][c("PagesComposerCarouselPostChildAttachmentAttributes").DESCRIPTION]:""},getTitle:function(a){return K._isIndexValid(a)?l[a][c("PagesComposerCarouselPostChildAttachmentAttributes").NAME]:""},getLink:function(a){return K._isIndexValid(a)?l[a][c("PagesComposerCarouselPostChildAttachmentAttributes").LINK]:""},getCTAType:function(a){return K._isIndexValid(a)?l[a][c("PagesComposerCarouselPostChildAttachmentAttributes").CTA_TYPE]:""},refresh:function(){if(r===null)return;c("Arbiter").inform("carousel-composer/pending-click-handle/"+r.toString());var a=d("Parent").bySelector(k,"._9u");a=c("DOM").scry(a,"._9s")[0];a&&d("CSS").addClass(a,"hidden_elem");a=null;new(c("IsReactComposerTypedLogger"))().setIsReactComposer(y).log();if(y){a={child_attachments:JSON.stringify(K.getChildParam()),change_time:r+1,scraped_time:D,action:"UPLOAD"};c("ReactComposerScrapedAttachmentActions").uploadImagesForCarousel({composerID:z,targetID:v,scrapeUrl:u,carouselParams:JSON.stringify(a),entryPoint:E,actorID:v});return}else{var b=K._getScraperEndpoint();a={child_attachments:K.getChildParam(),change_time:r+1,scraped_time:D,action:"UPLOAD"};b.addQueryData({scrape_url:encodeURIComponent(K.getURL()),carousel_params:a});d("ComposerXController").getAttachment(k,b.toString(),null,!0);return}},_isIndexValid:function(a){if(l.length<=a)return!1;else if(a<0)return!1;return!0},_checkChangeTimeAndDOMUpdateConsistent:function(){return q!==null&&o!==null&&p!==null&&r!==null&&r===q.getChangeTime()&&r===o.getChangeTime()&&r===p.getChangeTime()&&(!y||B)},_checkChildAttachmentReady:function(){return m!==null&&n!==null&&l!==null&&r!==null},_log:function(a){a=(a={child_attachments:K.getChildParam(),event:a,target_id:v,is_old_composer:!1},a[c("PagesComposerCarouselPostLogAttributes").SCRAPED_URL]=u,a);c("PagesComposerActionsLogger").log(a)},_getScraperEndpoint:function(){return new(c("URI"))("/ajax/composerx/attachment/link/scraper/")},_checkIfPreviewReadyToPublish:function(){var a=!0;if(!y)return;var b=K.getSelectedPlaceholderIndices();b.length!==0&&(a=!1);b=K.getNonPlaceholderSelectedIndices();for(var d=0;d<b.length;d++)if(K.hasFakeLink(b[d])){a=!1;break}c("Bootloader").loadModules(["ReactComposerPhotoCarouselActions"],function(b){a?b.setPreviewCompleted(z):b.setPreviewIncompleted(z)},"ChildAttachmentsController")},editUrl:function(a,b,e){var f=K.isVideoAttachment(a)||G;e={link:b?K.getURL():K.getLink(a),len:j,showcheckbox:e,showcta:f,selectedcta:K.getCTAType(a)};d("AsyncDialog").send(new(c("AsyncRequest"))("/composer/carouselediturl/").setData(e),function(e){var f=c("DOM").scry(e.getInnerContent(),"textarea")[0];f.disabled=b;e.subscribe("confirm",function(){var b=c("DOM").scry(e.getInnerContent(),"._eeb")[0],f=c("DOM").scry(e.getInnerContent(),".uiContextualLayerParent")[0];if(!b){e.hide();return}b=b.value;var g="";!b?g=i._("Indica la URL de destino."):b.length>j?g=i._("La URL de destino tiene m\u00e1s de {length} caracteres.",[i._param("length",j)]):c("ads-lib-urllib").isUrl(b)||(g=i._("El formato de la URL de destino no es correcto."));if(g){var h=c("DOM").scry(e.getInnerContent(),"._9vny")[0];d("XUIError").set({target:h,message:g});return}h=c("DOM").scry(e.getInnerContent(),"._301j")[0];h&&h.firstChild.checked?K.handleEditAllUrlEvent(b):(K.handleEditUrlEvent(a,b),f&&K.handleEditCTATypeEvent(a,f.getAttribute("value")));e.hide();K.refresh();return})})}};b=K;g["default"]=b},98);
__d("EditComposerChildAttachment",["csx","cx","ActorURI","AsyncDialog","AsyncRequest","CSS","ChildAttachmentsController","DOM","Event","JSXDOM","PagesComposerCarouselPostChildAttachmentAttributes","Run","XVideoEditDialogController"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=100,k=100;a=function(){function a(a,b){var e=this;this.$3=b;this.$1=a;this.$8=c("DOM").scry(this.$1,"._1m-h")[0];this.$4=c("DOM").scry(this.$1,"._1032")[0];this.$5=!1;this.$9=!1;this.$6=c("Event").listen(this.$4,"click",function(){if(!e.$5){var a=e.titleOnChange;e.clickHandler(e.$4,a,j);e.$5=!0}});this.$8&&(this.$10=c("Event").listen(this.$8,"click",function(){if(!e.$9){var a=e.descriptionOnChange;e.clickHandler(e.$8,a,k);e.$9=!0}}));b=c("DOM").scry(this.$1,"._5ngn")[0];b&&(this.$11=c("Event").listen(b,"click",function(){e.$14()}));a=c("DOM").scry(this.$1,"._ee9")[0];b=c("DOM").scry(this.$1,"._2ips")[0];b&&(this.$7=c("Event").listen(b,"click",function(){e.$15()}));a&&(this.$12=c("Event").listen(a,"click",function(){e.$16(!1)}));b=c("DOM").scry(this.$1,"._3sd0")[0];b&&(this.$13=c("Event").listen(b,"click",function(){e.$16(!0)}));this.render();d("Run").onLeave(this.cleanup.bind(this))}var b=a.prototype;b.render=function(){c("ChildAttachmentsController").isPlaceholder(this.$3)&&(this.$17(),this.$18(),this.$19(),this.$20(),this.$21(),this.$22()),c("ChildAttachmentsController").hasFakeLink(this.$3)?(this.$17(),this.$23()):(this.$18(),this.$24(),this.$25(),this.$26())};b.setCardIndex=function(a){this.$3=a};b.cleanup=function(){this.$6&&this.$6.remove();this.$6=null;this.$10&&this.$10.remove();this.$10=null;this.$11&&this.$11.remove();this.$11=null;var a=c("DOM").scry(this.$1,"._5ngn")[0];a&&d("CSS").addClass(a,"hidden_elem");this.$12&&this.$12.remove();this.$12=null;this.$17();this.$13&&this.$13.remove();this.$13=null;this.$18();this.$7&&this.$7.remove();this.$7=null;this.$22()};b.clickHandler=function(a,b,e){a=c("DOM").scry(a,"._5cy7")[0];this.$2=c("JSXDOM").textarea({maxlength:e,value:a.firstChild.nodeValue});d("CSS").addClass(this.$2,"_33ms");this.$2.onblur=this.onBlur.bind(this);this.$2.onchange=b.bind(this);c("DOM").replace(a,this.$2);this.$2.focus();this.$2.select()};b.onBlur=function(){var a=c("JSXDOM").span({"class":"_5cy7"},this.$2.value);c("DOM").insertBefore(this.$2,a);c("DOM").remove(this.$2);this.$5=!1;this.$9=!1};b.titleOnChange=function(){c("ChildAttachmentsController").handleCarouselTitleChangeEvent(this.$3,this.$2.value)};b.descriptionOnChange=function(){c("ChildAttachmentsController").handleCarouselDescriptionChangeEvent(this.$3,this.$2.value)};b.$14=function(){c("ChildAttachmentsController").handleCarouselPreviewImageUnSelectEvent(this.$3)};b.$15=function(){var a=c("ChildAttachmentsController").getChildParam()[this.$3];a=a[c("PagesComposerCarouselPostChildAttachmentAttributes").VIDEO_ID];a=c("XVideoEditDialogController").getURIBuilder().setInt("video_id",a).setEnum("source","carousel_preview");a=d("ActorURI").create(a.getURI(),c("ChildAttachmentsController").getTargetID());d("AsyncDialog").send(new(c("AsyncRequest"))(a),function(a){a.subscribe("hide",function(){c("ChildAttachmentsController").refresh()})})};b.$16=function(a){c("ChildAttachmentsController").editUrl(this.$3,!1,a)};b.$17=function(){var a=c("DOM").scry(this.$1,"._ee9")[0];a&&!d("CSS").hasClass(a,"hidden_elem")&&d("CSS").addClass(a,"hidden_elem")};b.$22=function(){var a=c("DOM").scry(this.$1,"._2ips")[0];a&&!d("CSS").hasClass(a,"hidden_elem")&&d("CSS").addClass(a,"hidden_elem")};b.$20=function(){this.$4&&!d("CSS").hasClass(this.$4,"hidden_elem")&&d("CSS").addClass(this.$4,"hidden_elem")};b.$21=function(){this.$8&&!d("CSS").hasClass(this.$8,"hidden_elem")&&d("CSS").addClass(this.$8,"hidden_elem")};b.$19=function(){var a=c("DOM").scry(this.$1,"._5ngn")[0];a&&!d("CSS").hasClass(a,"hidden_elem")&&d("CSS").addClass(a,"hidden_elem")};b.$18=function(){var a=c("DOM").scry(this.$1,"._3sd0")[0];a&&!d("CSS").hasClass(a,"hidden_elem")&&d("CSS").addClass(a,"hidden_elem")};b.$23=function(){var a=c("DOM").scry(this.$1,"._g5g")[0];a&&(d("CSS").matchesSelector(a,"._3scy")||d("CSS").addClass(a,"_3scy"))};b.$26=function(){var a=c("DOM").scry(this.$1,"._g5g")[0];a&&(d("CSS").matchesSelector(a,"._3scy")&&d("CSS").removeClass(a,"_3scy"))};b.$24=function(){var a=c("DOM").scry(this.$1,"._ee9")[0];a&&d("CSS").hasClass(a,"hidden_elem")&&d("CSS").removeClass(a,"hidden_elem")};b.$25=function(){var a=c("DOM").scry(this.$1,"._2ips")[0];a&&d("CSS").hasClass(a,"hidden_elem")&&d("CSS").removeClass(a,"hidden_elem")};return a}();g["default"]=a},98);
__d("EditComposerCarouselAttachment",["csx","Arbiter","CSS","ChildAttachmentsController","DOM","EditComposerChildAttachment","Parent","Run","URI"],function(a,b,c,d,e,f,g,h){"use strict";a=function(){a.init=function(b,c){return new a(b,c)};function a(a,b){var e=this;this.$1=a;this.$3=b;this.$2=[];this.$4=c("Arbiter").subscribe(["carousel-composer/pending-click-handle/"+this.getChangeTime().toString()],this.$6.bind(this));c("ChildAttachmentsController").registerCarouselJsInstance(this);d("Run").onLeave(function(){e.$4&&e.$4.unsubscribe()})}var b=a.prototype;b.render=function(){var a=c("DOM").scry(this.$1,"._5ya"),b=c("ChildAttachmentsController").getChildNum();for(var e=0;e<b;e++){var f=a[e];this.$7(f,c("ChildAttachmentsController").getDescription(e));this.$8(f,c("ChildAttachmentsController").getTitle(e));c("ChildAttachmentsController").isSelected(e)?d("CSS").removeClass(f,"hidden_elem"):d("CSS").addClass(f,"hidden_elem");this.$2[e].render()}if(!this.$5){f=d("Parent").bySelector(this.$1,"._9u");this.$5=c("DOM").scry(f,"._9s")[0]}this.$5&&d("CSS").addClass(this.$5,"hidden_elem")};b.initSetting=function(){var a=c("DOM").scry(this.$1,"._5ya"),b=c("ChildAttachmentsController").getChildNum();for(var d=0;d<b;d++)this.$2.push(new(c("EditComposerChildAttachment"))(a[d],d))};b.getChangeTime=function(){return this.$3.change_time};b.changeChildrenOrder=function(a,b){if(a===b)return;var c=this.$2[a];if(a<b)for(var d=a;d<b;d++)this.$2[d]=this.$2[d+1];else for(d=a;d>b;d--)this.$2[d]=this.$2[d-1];this.$2[b]=c;for(d=0;d<this.$2.length;d++)this.$2[d].setCardIndex(d)};b.getImageLinks=function(){var a=c("DOM").scry(this.$1,"._kvn"),b=[];for(var d=0;d<a.length;d++){var e=new(c("URI"))(a[d].src);b.push(e.getQueryData().url)}return b};b.$7=function(a,b){a=c("DOM").scry(a,"._1m-h")[0];if(!a)return;a=c("DOM").scry(a,"._5cy7")[0];c("DOM").setContent(a,b)};b.$8=function(a,b){a=c("DOM").scry(a,"._1032")[0];a=c("DOM").scry(a,"._5cy7")[0];c("DOM").setContent(a,b)};b.$6=function(){for(var a=0;a<this.$2.length;a++)this.$2[a].cleanup()};return a}();g["default"]=a},98);
__d("EditComposerLppUnderCarouselAttachment",["csx","cx","ActorURI","Arbiter","AsyncDialog","AsyncRequest","CSS","ChildAttachmentsController","DOM","Event","JSXDOM","LitestandShareAttachment","PagesComposerCarouselPostChildAttachmentAttributes","Parent","ReactComposerScrapedAttachmentActions","Run","Style","URI","XVideoEditDialogController"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=15,k=250,l=70,m=100;a=function(){function a(a,b,e){var f=this;this.titleOnChange=function(){c("ChildAttachmentsController").handleLppTitleChangeEvent(f.$17.value),c("ReactComposerScrapedAttachmentActions").linkTitleEdited(f.$16,f.$43(),f.$17.value)};this.descriptionOnChange=function(){c("ChildAttachmentsController").handleLppDescriptionChangeEvent(f.$17.value),c("ReactComposerScrapedAttachmentActions").linkDescriptionEdited(f.$16,f.$43(),f.$17.value)};this.$1=a;this.$2=b;this.$36=e;this.$16=e.composer_id;this.$37=this.$36.change_time;this.$38=c("Arbiter").subscribe(["carousel-composer/pending-click-handle/"+this.getChangeTime().toString()],this.cleanup.bind(this));this.$3=d("Parent").bySelector(this.$1,"._4tbq");this.$4=c("DOM").scry(this.$3,"._6m2")[0];this.$5=c("DOM").scry(this.$1,"._2r3x")[0];this.$6=c("DOM").scry(this.$5,"._3m6-")[0];this.$7=c("DOM").scry(this.$5,"._3c21")[0];this.$8=c("DOM").scry(this.$1,"._3e-u")[0];this.$11="_51cc";this.$12="_59ap";this.$13="_5cwb";this.$14="_po-";this.$15="_3e-t";this.$22=c("DOM").scry(this.$1,"._275z")[0];this.$18=c("DOM").scry(this.$1,"._5q4r")[0];this.$27=c("DOM").scry(this.$1,"._275x")[0];this.$26=c("DOM").scry(this.$1,"._1s4d")[0];this.$27&&d("CSS").addClass(this.$27,"_6m3");this.$26&&d("CSS").addClass(this.$26,"_59tj");if(this.$22){a=document.createElement("div");d("CSS").addClass(a,"_6m6");d("CSS").addClass(this.$22,"_5cy7");c("DOM").replace(this.$22,a);a.appendChild(this.$22);this.$22=a}if(this.$18){b=document.createElement("div");d("CSS").addClass(b,"_6m7");d("CSS").addClass(b,"_3bt9");d("CSS").addClass(this.$18,"_5cy7");c("DOM").replace(this.$18,b);b.appendChild(this.$18);this.$18=b}this.$23=c("DOM").scry(this.$1,"._6m6")[0];this.$19=c("DOM").scry(this.$1,"._6m7")[0];if(e.is_video_lpp){a=c("DOM").scry(this.$1,"._275_")[0];a.parentNode.removeChild(a)}c("ChildAttachmentsController").canEditLpp()&&this.$23&&(this.$24=c("Event").listen(this.$23,"click",function(){if(!f.$25){var a=f.titleOnChange;f.clickHandler(f.$23,a,m);f.$25=!0}}));c("ChildAttachmentsController").canEditLpp()&&this.$19&&(this.$20=c("Event").listen(this.$19,"click",function(){if(!f.$21){var a=f.descriptionOnChange;f.clickHandler(f.$19,a,k);f.$21=!0}}));b=c("DOM").scry(this.$1,"._4g6m")[0];e=c("DOM").scry(this.$1,"._4g6n")[0];e&&(this.$39=c("Event").listen(e,"click",function(){f.$41()}));b&&(this.$40=c("Event").listen(b,"click",function(){f.$42()}));this.$10=c("DOM").scry(this.$1,"._146d")[0];this.$31={Right:0,Left:1};this.$28=this.$2.length;this.$28&&(this.$32=c("DOM").scry(this.$4,"._k7m")[0],this.$33=c("DOM").scry(this.$4,"._3ekx")[0]);this.$8&&c("DOM").remove(this.$8);this.$28<=1?d("CSS").addClass(this.$10,"hidden_elem"):(d("CSS").addClass(this.$10,"UIThumbPagerControl_First"),this.$29=c("DOM").scry(this.$1,".UIThumbPagerControl_Button_Left")[0],this.$30=c("DOM").scry(this.$1,".UIThumbPagerControl_Button_Right")[0],d("CSS").addClass(this.$10,"UIThumbPagerControl_First"),this.$34=c("Event").listen(this.$29,"click",function(){f.$43()>0&&f.thumbHandler(f.$31.Left)}),this.$35=c("Event").listen(this.$30,"click",function(){var a=f.$43();if(a<0)return;a+1<f.$28&&f.thumbHandler(f.$31.Right)}));c("ChildAttachmentsController").registerLppJsInstance(this);d("Run").onLeave(function(){f.cleanup(),f.$38&&f.$38.unsubscribe()})}var b=a.prototype;b.clickHandler=function(a,b,e){var f=c("DOM").scry(a,"._5cy7")[0];this.$17=c("JSXDOM").textarea({maxlength:e,value:f.firstChild.nodeValue});if(d("CSS").matchesSelector(a,"._6m7")){e=Math.min(d("LitestandShareAttachment").getNumDescriptionLines(this.$1)*j,l);c("Style").set(this.$17,"height",e+"px")}d("CSS").matchesSelector(this.$4,"._59ap")||d("CSS").matchesSelector(this.$4,"._6m4")?d("CSS").addClass(this.$17,"_1r8i"):d("CSS").addClass(this.$17,"_4xe4");this.$17.onblur=this.onBlur.bind(this);this.$17.onchange=b.bind(this);c("DOM").replace(f,this.$17);this.$17.focus();this.$17.select()};b.onBlur=function(){var a=c("JSXDOM").span({"class":"_5cy7"},this.$17.value);c("DOM").insertBefore(this.$17,a);c("DOM").remove(this.$17);d("LitestandShareAttachment").init(this.$1);this.$21=!1;this.$25=!1};b.thumbHandler=function(a){var b=this.$43(),d=b;a==this.$31.Left?d=b-1:a==this.$31.Right&&(d=b+1);c("ChildAttachmentsController").handleImageChangeEvent(b,d)};b.getMediaElem=function(a){var b=c("DOM").scry(this.$1,"._k7m")[0];return b.children[a]};b.render=function(){this.showButtons();var a=this.$43();if(a<0)return;this.hideAllImages();var b=this.getMediaElem(a);this.$2[a][1]?(d("CSS").removeClass(this.$4,this.$11),d("CSS").removeClass(this.$4,this.$13),d("CSS").addClass(this.$4,this.$12)):this.$2[a][2]?(d("CSS").addClass(this.$4,this.$11),d("CSS").addClass(this.$4,this.$13),d("CSS").removeClass(this.$4,this.$12)):(d("CSS").removeClass(this.$4,this.$11),d("CSS").addClass(this.$4,this.$13),d("CSS").removeClass(this.$4,this.$12));d("CSS").removeClass(b,"hidden_elem");c("DOM").remove(this.$33);c("DOM").remove(this.$32);c("DOM").appendContent(this.$6,this.$32);d("CSS").hasClass(this.$4,this.$12)?c("DOM").appendContent(this.$6,this.$33):c("DOM").appendContent(this.$7,this.$33);this.reloadNodeInfo(a);a===0?(d("CSS").addClass(this.$10,"UIThumbPagerControl_First"),d("CSS").removeClass(this.$10,"UIThumbPagerControl_Last")):a+1===this.$28?(d("CSS").addClass(this.$10,"UIThumbPagerControl_Last"),d("CSS").removeClass(this.$10,"UIThumbPagerControl_First")):(d("CSS").removeClass(this.$10,"UIThumbPagerControl_First"),d("CSS").removeClass(this.$10,"UIThumbPagerControl_Last"));if(!this.$9){b=d("Parent").bySelector(this.$3,"._9u");this.$9=c("DOM").scry(b,"._9s")[0]}this.$9&&d("CSS").removeClass(this.$9,"hidden_elem");this.showSettingButtons()};b.showSettingButtons=function(){var a=this.$43();a=c("ChildAttachmentsController").isVideoAttachment(a);a?(this.$44(),this.$45()):(this.$46(),this.$47())};b.hideAllImages=function(){for(var a=0;a<this.$28;a++){var b=this.getMediaElem(a);d("CSS").addClass(b,"hidden_elem")}};b.changeLPPPreviewOrder=function(a,b){if(a===b)return;var d=this.getMediaElem(a),e=this.getMediaElem(b);c("DOM").remove(d);a>b?c("DOM").insertBefore(e,d):c("DOM").insertAfter(e,d);e=this.$2.splice(a,1);this.$2.splice(b,0,e[0])};b.getChangeTime=function(){return this.$37};b.hideButtons=function(){d("CSS").addClass(this.$10,"hidden_elem")};b.showButtons=function(){this.$28>1&&d("CSS").removeClass(this.$10,"hidden_elem")};b.reloadNodeInfo=function(a){if(a<0)return;if(this.$19){var b=c("ChildAttachmentsController").getValueFromDOM(a,"description"),e=c("DOM").scry(this.$19,"._5cy7")[0];!c("ChildAttachmentsController").canEditLpp()&&e&&d("CSS").removeClass(e,"_5cy7");e&&c("DOM").setContent(e,b)}if(this.$23){e=c("ChildAttachmentsController").getValueFromDOM(a,"name");b=c("DOM").scry(this.$23,"._5cy7")[0];!c("ChildAttachmentsController").canEditLpp()&&b&&d("CSS").removeClass(b,"_5cy7");b&&c("DOM").setContent(b,e)}d("LitestandShareAttachment").init(this.$1)};b.closeImage=function(a){this.hideAllImages(),this.hideButtons(),this.reloadNodeInfo(a)};b.cleanup=function(){d("CSS").addClass(this.$10,"hidden_elem"),this.$20&&this.$20.remove(),this.$24&&this.$24.remove(),this.$34&&this.$34.remove(),this.$35&&this.$35.remove(),this.$40&&this.$40.remove(),this.$39&&this.$39.remove(),this.$44(),this.$45()};b.getImageLinks=function(){var a=c("DOM").scry(this.$4,"._6m5"),b=[];for(var d=0;d<a.length;d++){var e=new(c("URI"))(a[d].firstChild.src),f=e.getQueryData().url;f||(f=e.toString());b.push(f)}return b};b.$45=function(){var a=c("DOM").scry(this.$1,"._4g6n")[0];a&&d("CSS").hasClass(a,"hidden_elem")&&d("CSS").removeClass(a,"hidden_elem")};b.$47=function(){var a=c("DOM").scry(this.$1,"._4g6n")[0];a&&!d("CSS").hasClass(a,"hidden_elem")&&d("CSS").addClass(a,"hidden_elem")};b.$44=function(){var a=c("DOM").scry(this.$1,"._4g6m")[0];a&&d("CSS").hasClass(a,"hidden_elem")&&d("CSS").removeClass(a,"hidden_elem")};b.$46=function(){var a=c("DOM").scry(this.$1,"._4g6m")[0];a&&!d("CSS").hasClass(a,"hidden_elem")&&d("CSS").addClass(a,"hidden_elem")};b.$43=function(){var a=c("ChildAttachmentsController").getSelectedIndices();return a.length==0?-1:a[0]};b.$42=function(){c("ChildAttachmentsController").editUrl(this.$43(),!0,!1)};b.$41=function(){var a=this.$43();a=c("ChildAttachmentsController").getChildParam()[a];a=a[c("PagesComposerCarouselPostChildAttachmentAttributes").VIDEO_ID];a=c("XVideoEditDialogController").getURIBuilder().setInt("video_id",a).setEnum("source","carousel_preview");a=d("ActorURI").create(a.getURI(),c("ChildAttachmentsController").getTargetID());d("AsyncDialog").send(new(c("AsyncRequest"))(a),function(a){a.subscribe("hide",function(){c("ChildAttachmentsController").refresh()})})};return a}();g["default"]=a},98);
__d("ComposerXCarouselUploadArea",["csx","cx","fbt","Arbiter","CSS","ChildAttachmentsController","DOM","Event","PagesComposerCarouselPostChildAttachmentAttributes","PhotosMultiUploadInput","Rect","Run","URI"],function(a,b,c,d,e,f,g,h,i,j){a=function(){function a(a,b,e,f){var g=this;this.$1=a;this.$2=b;this.$3=e;this.$6=f;this.$7=this.$6.max_selected;this.$8=this.$6.change_time;this.$12=0;this.$4=[];this.$13();this.$14();this.$9=c("Arbiter").subscribe(["multi-upload/medias-added/"+this.$3],this.$15.bind(this));c("ChildAttachmentsController").registerUploadAreaJsInstance(this);this.$10=c("Arbiter").subscribe(["multi-upload/images-upload-start/"+this.$3],this.$16.bind(this));this.$11=c("Arbiter").subscribe(["drag-and-drop/"+this.$3],this.$17.bind(this));d("Run").onLeave(function(){g.$18(),g.$9.unsubscribe(),g.$10.unsubscribe(),g.$11.unsubscribe()})}var b=a.prototype;b.getChangeTime=function(){return this.$8};b.reset=function(){this.removeImageUploadArea()};b.removeImageUploadArea=function(){c("DOM").scry(this.$1,"._yr").forEach(function(a){d("CSS").matchesSelector(a,"._2oh")||c("DOM").remove(a)});c("DOM").scry(this.$1,"._579").forEach(function(a){d("CSS").matchesSelector(a,"._2oh")||c("DOM").remove(a)});var a=this.$2.getUploadInput().getGrid();a?a.clearSession():c("PhotosMultiUploadInput").clearSession(this.$3);c("Arbiter").inform(["multi-upload/all-images-removed/"+this.$3,"multi-upload/all-images-removed"])};b.$19=function(){var a=c("ChildAttachmentsController").getChildNum(),b=c("ChildAttachmentsController").getPlaceholderIndices().length;return a-b};b.$15=function(a,b){a=b.params;b=this.$19();var d=c("ChildAttachmentsController").getURL(),e=c("ChildAttachmentsController").getSelectedNum();for(var f=0;f<a.length;f++){a[f][c("PagesComposerCarouselPostChildAttachmentAttributes").IMAGE_FBID]!=null&&(a[f][c("PagesComposerCarouselPostChildAttachmentAttributes").IMAGE_SOURCE]="upload");var g=0;e<this.$7&&(g=1,e++);a[f][c("PagesComposerCarouselPostChildAttachmentAttributes").LINK]=d;a[f][c("PagesComposerCarouselPostChildAttachmentAttributes").SELECTED]=g;a[f][c("PagesComposerCarouselPostChildAttachmentAttributes").SCRAPED]=0;d==="http://www.facebook.com/carousel_photo_composer_fake_url"&&(a[c("PagesComposerCarouselPostChildAttachmentAttributes").NAME]="ADD HEADLINE");c("ChildAttachmentsController").addChild(b+f,a[f])}c("ChildAttachmentsController").refresh()};b.renderImageSelection=function(){this.$20()};b.$17=function(a,b){c("ChildAttachmentsController").handleImageDragEvent(b.previousIndex,b.currentIndex)};b.refreshImageClickRegister=function(){this.$18(),this.$13()};b.$20=function(){this.$21();var a=c("DOM").scry(this.$1,".fbVaultGridItem");for(var b=0;b<a.length;b++){var e=c("DOM").find(a[b],".fbVaultGridImage");c("ChildAttachmentsController").isSelected(b)?(d("CSS").addClass(e,"_4pcc"),d("CSS").removeClass(e,"_4pcd"),c("DOM").appendContent(e,this.$22(b))):(d("CSS").addClass(e,"_4pcd"),d("CSS").removeClass(e,"_4pcc"))}};b.$21=function(){var a=c("DOM").scry(this.$1,"._5xnt");for(var b=0;b<a.length;b++)c("DOM").remove(a[b])};b.$22=function(a){a=c("ChildAttachmentsController").getFrontSelectedNum(a)+1;return c("DOM").create("div",{className:"_5xnt"},c("DOM").create("div",{className:"_5xoq"},c("DOM").create("h",null,a)))};b.$14=function(){var a=this,b=c("DOM").scry(this.$1,"._540u");this.$5=c("Event").listen(b[0],"click",function(){var e=c("DOM").scry(a.$1,"._540y");d("CSS").toggleClass(e[0],"hidden_elem");e=a.$12===0?j._("Mostrar"):j._("Ocultar");a.$12=1-a.$12;c("DOM").setContent(b[0],e)})};b.$16=function(){this.$18()};b.$13=function(){var a=this,b=c("DOM").scry(this.$1,".fbVaultGridItem"),d=function(d){a.$4.push(c("Event").listen(b[d],"click",function(){a.$23(d)}))};for(var e=0;e<b.length;e++)d(e)};b.$18=function(){for(var a=0;a<this.$4.length;a++)this.$4[a].remove();this.$4=[]};b.$23=function(a){var b=c("ChildAttachmentsController").isSelected(a)?c("ChildAttachmentsController").getSelectedNum()-1:c("ChildAttachmentsController").getSelectedNum()+1;if(b>this.$7)return;b=!c("ChildAttachmentsController").isSelected(a);b?c("ChildAttachmentsController").handleImageSelectEvent(a):c("ChildAttachmentsController").handleUploadAreaImageUnSelectEvent(a)};b.updateScrollableArea=function(){var a=c("DOM").scry(this.$1,".fbScrollableArea");a=new(c("Rect"))(a[0]);c("Arbiter").inform("set-bounding-box/"+this.$3,a)};b.getImageLinks=function(){var a=c("DOM").scry(this.$1,".fbVaultGridImage"),b=[];for(var d=0;d<a.length;d++){var e=new(c("URI"))(a[d].firstChild.src);b.push(e.getQueryData().url)}return b};return a}();g["default"]=a},98);
__d("CarouselDynamicSlideshowController",["Arbiter"],function(a,b,c,d,e,f){a=function(){"use strict";function a(a){this.$1=a.slideshow_ids,this.$2=a.carousel}var c=a.prototype;c.slide=function(){var a=this.$2.getVisibleIndex();this.$1.forEach(function(c,d){if(!c)return;d===a?b("Arbiter").inform("fbPhotosSlideshow/forceEnable",{parentID:c}):b("Arbiter").inform("fbPhotosSlideshow/forceDisable",{parentID:c})})};return a}();e.exports=a},null);
__d("VideoAutoplayPlayerBase",["EventEmitter","FBLogger"],function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.wasVisible=!1,c.$VideoAutoplayPlayerBase1=[],b)||babelHelpers.assertThisInitialized(c)}var d=b.prototype;d.isVisible=function(){throw new Error("Should be overridden")};d.getDistanceToViewport=function(){throw new Error("Should be overridden")};d.getVideoPlayerController=function(){c("FBLogger")("video").warn(["VideoAutoplayPlayerBase.getVideoPlayerController()","was called and returned null."].join(" "));return null};d.logDisplayed=function(){throw new Error("Should be overridden")};d.playWithoutUnmute=function(a){throw new Error("Should be overridden")};d.pause=function(a){throw new Error("Should be overridden")};d.isAutoplayable=function(){throw new Error("Should be overridden")};d.getDOMPosition=function(){throw new Error("Should be overridden")};d.isLooping=function(){throw new Error("Should be overridden")};d.isState=function(a){throw new Error("Should be overridden")};d.preload=function(){throw new Error("Should be overridden")};d.isMuted=function(){throw new Error("Should be overridden")};d.isPlaying=function(){throw new Error("Should be overridden")};d.shouldPauseWhenScrolledOffscreen=function(){throw new Error("Should be overridden")};d.getAutoplayRules=function(){return this.$VideoAutoplayPlayerBase1};d.registerAutoplayRule=function(a){this.$VideoAutoplayPlayerBase1.push(a)};d.shouldImmediatelyAutoplayOnRegister=function(){return!1};return b}(c("EventEmitter"));g["default"]=a},98);
__d("CarouselVideoPlayerController",["VideoAutoplayControllerX","VideoAutoplayPlayerBase","getElementPosition","getViewportDimensions","tidyEvent"],function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.preload=function(){d.$CarouselVideoPlayerController1[d.$CarouselVideoPlayerController4]&&d.$CarouselVideoPlayerController1[d.$CarouselVideoPlayerController4].preload()};d.$CarouselVideoPlayerController1=b.video_units;d.$CarouselVideoPlayerController2=b.carousel;d.$CarouselVideoPlayerController3=b.should_autoplay;d.$CarouselVideoPlayerController5=b.root;d.$CarouselVideoPlayerController4=d.$CarouselVideoPlayerController2.getVisibleIndex();d.$CarouselVideoPlayerController1.forEach(function(a,b){a&&c("tidyEvent")(a.addListener("turnOffAutoplay",function(){return d.emit("turnOffAutoplay")}))});return d}b.registerCarousel=function(a){a=new b(a);c("VideoAutoplayControllerX").registerVideoUnit(a);return a};var d=b.prototype;d.isVisible=function(){var a=this.$CarouselVideoPlayerController1[this.$CarouselVideoPlayerController4];if(!a)return!1;return a.isFullscreen()?!0:this.isCarouselVideoVisble()};d.getDistanceToViewport=function(){var a=c("getViewportDimensions")().height,b=c("getElementPosition")(this.$CarouselVideoPlayerController5);return b.height===0?-Infinity:b.y-a/2};d.logDisplayed=function(){this.$CarouselVideoPlayerController1[this.$CarouselVideoPlayerController4]&&this.$CarouselVideoPlayerController1[this.$CarouselVideoPlayerController4].logEvent("displayed")};d.playWithoutUnmute=function(a){this.$CarouselVideoPlayerController1[this.$CarouselVideoPlayerController4]&&this.$CarouselVideoPlayerController1[this.$CarouselVideoPlayerController4].play(a)};d.pause=function(a){this.$CarouselVideoPlayerController1[this.$CarouselVideoPlayerController4]&&this.$CarouselVideoPlayerController1[this.$CarouselVideoPlayerController4].pause(a)};d.isAutoplayable=function(){return this.$CarouselVideoPlayerController3};d.getDOMPosition=function(){return c("getElementPosition")(this.$CarouselVideoPlayerController5)};d.isLooping=function(){return this.$CarouselVideoPlayerController1[this.$CarouselVideoPlayerController4]&&!!this.$CarouselVideoPlayerController1[this.$CarouselVideoPlayerController4].getOption("Looping","isLooping")};d.isState=function(a){return this.$CarouselVideoPlayerController1[this.$CarouselVideoPlayerController4]?this.$CarouselVideoPlayerController1[this.$CarouselVideoPlayerController4].isState(a):!1};d.getIsInChannel=function(){return!1};d.abortLoading=function(){return};d.getVideoPlayerController=function(){return this.$CarouselVideoPlayerController1[this.$CarouselVideoPlayerController2.getVisibleIndex()]||null};d.slide=function(){var a=this;this.$CarouselVideoPlayerController4=this.$CarouselVideoPlayerController2.getVisibleIndex();this.$CarouselVideoPlayerController1.forEach(function(b,c){b&&(c===a.$CarouselVideoPlayerController4?a.$CarouselVideoPlayerController3&&b.play("autoplay_initiated"):b.pause("page_visibility_initiated"))})};d.removeUnit=function(a){this.$CarouselVideoPlayerController1.splice(a,1)};d.isMuted=function(){var a=this.getVideoPlayerController();return a?a.isMuted():!1};d.isCarouselVideoVisble=function(){var a=c("getViewportDimensions")().height,b=c("getElementPosition")(this.$CarouselVideoPlayerController5);if(b.height===0)return!1;var d=b.y;b=b.y+b.height;return d>=0&&b<a};d.isPlaying=function(){var a=this.getVideoPlayerController();return a?a.isState("playing"):!1};d.shouldPauseWhenScrolledOffscreen=function(){return!1};return b}(c("VideoAutoplayPlayerBase"));g["default"]=a},98);
__d("TidyArbiterMixin",["Arbiter","ArbiterMixin","Run"],function(a,b,c,d,e,f,g){a={};Object.assign(a,c("ArbiterMixin"),{_getArbiterInstance:function(){var a=this;this._arbiter||(this._arbiter=new(c("Arbiter"))(),d("Run").onLeave(function(){delete a._arbiter}));return this._arbiter}});b=a;g["default"]=b},98);
__d("XMultiShareInfiniteCarouselLoadMoreController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("/ads/multishare/carousel/infinite/load/",{loading_id:{type:"String",required:!0},ad_token:{type:"String",required:!0},after:{type:"Int",required:!0},num_to_load:{type:"Int",required:!0},notext:{type:"Bool",defaultValue:!1},nobottom:{type:"Bool",defaultValue:!1},showendcard:{type:"Bool",defaultValue:!1},non_link_video:{type:"Bool",defaultValue:!1},should_fetch_more_videos_in_channel:{type:"Bool",defaultValue:!1},video_aspect_ratio:{type:"Float",required:!0}})},null);
__d("ExtendedMultiShareCarouselPagerArrowsVisible",["csx","cx","Animation","Arbiter","AsyncRequest","CSS","CarouselDynamicSlideshowController","CarouselVideoPlayerController","DOM","DOMQuery","Ease","Event","Locale","Run","TidyArbiterMixin","TrackingNodes","XMultiShareInfiniteCarouselLoadMoreController","mixin","setTimeout","tidyEvent"],function(a,b,c,d,e,f,g,h){var i=12,j=312,k=182,l=6,m=1,n=350,o=5,p=5;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c){var d,e;e=a.call(this)||this;e.$ExtendedMultiShareCarouselPagerArrowsVisible1=c.node;e.$ExtendedMultiShareCarouselPagerArrowsVisible2=c.grid;e.$ExtendedMultiShareCarouselPagerArrowsVisible3=c.prev_pager;e.$ExtendedMultiShareCarouselPagerArrowsVisible4=c.next_pager;e.$ExtendedMultiShareCarouselPagerArrowsVisible5=c.disable_pager_arrow_timeout;e.$ExtendedMultiShareCarouselPagerArrowsVisible6=c.item_width||j;e.$ExtendedMultiShareCarouselPagerArrowsVisible7=c.link_width||k;e.$ExtendedMultiShareCarouselPagerArrowsVisible8=c.num_visible_items||m;e.$ExtendedMultiShareCarouselPagerArrowsVisible9=c.edit_mode;e.$ExtendedMultiShareCarouselPagerArrowsVisible10=c.video_units;e.$ExtendedMultiShareCarouselPagerArrowsVisible11=c.should_autoplay;e.$ExtendedMultiShareCarouselPagerArrowsVisible12=null;e.$ExtendedMultiShareCarouselPagerArrowsVisible13=(d=c.infinite_scroll_extra_fields)==null?void 0:d.ad_token;e.$ExtendedMultiShareCarouselPagerArrowsVisible14=(d=c.infinite_scroll_extra_fields)==null?void 0:d.no_text;e.$ExtendedMultiShareCarouselPagerArrowsVisible15=(d=c.infinite_scroll_extra_fields)==null?void 0:d.no_bottom;e.$ExtendedMultiShareCarouselPagerArrowsVisible16=(d=c.infinite_scroll_extra_fields)==null?void 0:d.show_end_card;e.$ExtendedMultiShareCarouselPagerArrowsVisible17=(d=c.infinite_scroll_extra_fields)==null?void 0:d.non_link_video;e.$ExtendedMultiShareCarouselPagerArrowsVisible18=(d=c.infinite_scroll_extra_fields)==null?void 0:d.video_aspect_ratio;e.$ExtendedMultiShareCarouselPagerArrowsVisible19=(d=c.infinite_scroll_extra_fields)==null?void 0:d.video_channel;e.$ExtendedMultiShareCarouselPagerArrowsVisible20=(d=c.infinite_scroll_extra_fields)==null?void 0:d.video_ids;e.$ExtendedMultiShareCarouselPagerArrowsVisible21=(d=c.infinite_scroll_extra_fields)==null?void 0:d.should_fetch_more_videos_in_channel;e.$ExtendedMultiShareCarouselPagerArrowsVisible22=c.use_infinite_scroll;e.$ExtendedMultiShareCarouselPagerArrowsVisible23=0;e.$ExtendedMultiShareCarouselPagerArrowsVisible24=i;e.$ExtendedMultiShareCarouselPagerArrowsVisible25=b("Locale").isRTL()?"right":"left";e.$ExtendedMultiShareCarouselPagerArrowsVisible2.style[e.$ExtendedMultiShareCarouselPagerArrowsVisible25]=e.$ExtendedMultiShareCarouselPagerArrowsVisible24+"px";e.$ExtendedMultiShareCarouselPagerArrowsVisible26();d={video_units:e.$ExtendedMultiShareCarouselPagerArrowsVisible10,carousel:babelHelpers.assertThisInitialized(e),should_autoplay:e.$ExtendedMultiShareCarouselPagerArrowsVisible11,root:e.$ExtendedMultiShareCarouselPagerArrowsVisible1};e.$ExtendedMultiShareCarouselPagerArrowsVisible27=b("CarouselVideoPlayerController").registerCarousel(d);if(c.slideshow_ids){e.$ExtendedMultiShareCarouselPagerArrowsVisible28=c.slideshow_ids;d={slideshow_ids:c.slideshow_ids,carousel:babelHelpers.assertThisInitialized(e)};e.$ExtendedMultiShareCarouselPagerArrowsVisible29=new(b("CarouselDynamicSlideshowController"))(d)}c.extensions.forEach(function(a){a.init(this)},babelHelpers.assertThisInitialized(e));e.subscribe("autoscroll",e.$ExtendedMultiShareCarouselPagerArrowsVisible30.bind(babelHelpers.assertThisInitialized(e)));b("tidyEvent")([b("Event").listen(e.$ExtendedMultiShareCarouselPagerArrowsVisible3,"click",e.$ExtendedMultiShareCarouselPagerArrowsVisible31.bind(babelHelpers.assertThisInitialized(e))),b("Event").listen(e.$ExtendedMultiShareCarouselPagerArrowsVisible4,"click",e.$ExtendedMultiShareCarouselPagerArrowsVisible30.bind(babelHelpers.assertThisInitialized(e)))]);e.init_pagers();e.$ExtendedMultiShareCarouselPagerArrowsVisible9&&(e.$ExtendedMultiShareCarouselPagerArrowsVisible12=b("Arbiter").subscribe(["carousel-composer/carousel_card_change"],e.$ExtendedMultiShareCarouselPagerArrowsVisible32.bind(babelHelpers.assertThisInitialized(e))));e.$ExtendedMultiShareCarouselPagerArrowsVisible33=b("Arbiter").subscribe(["product-level-xout"],e.$ExtendedMultiShareCarouselPagerArrowsVisible32.bind(babelHelpers.assertThisInitialized(e)));b("Run").onLeave(function(){e.$ExtendedMultiShareCarouselPagerArrowsVisible12&&e.$ExtendedMultiShareCarouselPagerArrowsVisible12.unsubscribe(),e.$ExtendedMultiShareCarouselPagerArrowsVisible33&&e.$ExtendedMultiShareCarouselPagerArrowsVisible33.unsubscribe()});return e}var d=c.prototype;d.getVisibleIndex=function(){return this.$ExtendedMultiShareCarouselPagerArrowsVisible23};d.$ExtendedMultiShareCarouselPagerArrowsVisible32=function(){this.$ExtendedMultiShareCarouselPagerArrowsVisible23=0,this.$ExtendedMultiShareCarouselPagerArrowsVisible24=i,this.$ExtendedMultiShareCarouselPagerArrowsVisible2.style[this.$ExtendedMultiShareCarouselPagerArrowsVisible25]=this.$ExtendedMultiShareCarouselPagerArrowsVisible24+"px",this.refresh()};d.$ExtendedMultiShareCarouselPagerArrowsVisible34=function(){if(this.$ExtendedMultiShareCarouselPagerArrowsVisible9)return this.$ExtendedMultiShareCarouselPagerArrowsVisible35()-this.getLastVisibleIndex();else return this.$ExtendedMultiShareCarouselPagerArrowsVisible2.childNodes.length-this.getLastVisibleIndex()};d.$ExtendedMultiShareCarouselPagerArrowsVisible36=function(){return this.$ExtendedMultiShareCarouselPagerArrowsVisible23};d.$ExtendedMultiShareCarouselPagerArrowsVisible37=function(){return this.$ExtendedMultiShareCarouselPagerArrowsVisible36()>0};d.$ExtendedMultiShareCarouselPagerArrowsVisible38=function(){return this.$ExtendedMultiShareCarouselPagerArrowsVisible34()>0};d.$ExtendedMultiShareCarouselPagerArrowsVisible30=function(){if(!this.$ExtendedMultiShareCarouselPagerArrowsVisible38()||this.readjusting||this.hasReq&&this.$ExtendedMultiShareCarouselPagerArrowsVisible23>=this.$ExtendedMultiShareCarouselPagerArrowsVisible2.childNodes.length-2)return;this.$ExtendedMultiShareCarouselPagerArrowsVisible39(1,this.$ExtendedMultiShareCarouselPagerArrowsVisible37());this.$ExtendedMultiShareCarouselPagerArrowsVisible26();this.$ExtendedMultiShareCarouselPagerArrowsVisible40()};d.$ExtendedMultiShareCarouselPagerArrowsVisible31=function(){if(!this.$ExtendedMultiShareCarouselPagerArrowsVisible37())return;this.$ExtendedMultiShareCarouselPagerArrowsVisible39(-1,this.$ExtendedMultiShareCarouselPagerArrowsVisible38());this.$ExtendedMultiShareCarouselPagerArrowsVisible26()};d.$ExtendedMultiShareCarouselPagerArrowsVisible41=function(){return this.$ExtendedMultiShareCarouselPagerArrowsVisible38()&&this.$ExtendedMultiShareCarouselPagerArrowsVisible37()};d.$ExtendedMultiShareCarouselPagerArrowsVisible26=function(){this.$ExtendedMultiShareCarouselPagerArrowsVisible38()&&b("TrackingNodes").addDataAttribute(this.$ExtendedMultiShareCarouselPagerArrowsVisible4,201,this.getLastVisibleIndex()+1),this.$ExtendedMultiShareCarouselPagerArrowsVisible37()&&b("TrackingNodes").addDataAttribute(this.$ExtendedMultiShareCarouselPagerArrowsVisible3,202,this.getLastVisibleIndex()-1)};d.$ExtendedMultiShareCarouselPagerArrowsVisible40=function(){if(this.hasReq||!this.$ExtendedMultiShareCarouselPagerArrowsVisible22)return;if(this.$ExtendedMultiShareCarouselPagerArrowsVisible2.childNodes.length-this.$ExtendedMultiShareCarouselPagerArrowsVisible23<=o){var a=b("DOM").scry(this.$ExtendedMultiShareCarouselPagerArrowsVisible2,"._6k18")[0];if(a){a=a.id;a=b("XMultiShareInfiniteCarouselLoadMoreController").getURIBuilder().setString("loading_id",a).setString("ad_token",this.$ExtendedMultiShareCarouselPagerArrowsVisible13).setInt("after",this.$ExtendedMultiShareCarouselPagerArrowsVisible2.childNodes.length-1).setInt("num_to_load",p).setBool("notext",this.$ExtendedMultiShareCarouselPagerArrowsVisible14).setBool("nobottom",this.$ExtendedMultiShareCarouselPagerArrowsVisible15).setBool("showendcard",this.$ExtendedMultiShareCarouselPagerArrowsVisible16).setBool("non_link_video",this.$ExtendedMultiShareCarouselPagerArrowsVisible17).setBool("should_fetch_more_videos_in_channel",this.$ExtendedMultiShareCarouselPagerArrowsVisible21).setFloat("video_aspect_ratio",this.$ExtendedMultiShareCarouselPagerArrowsVisible18).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(this.$ExtendedMultiShareCarouselPagerArrowsVisible42.bind(this)).setErrorHandler(this.$ExtendedMultiShareCarouselPagerArrowsVisible43.bind(this)).send();this.hasReq=!0}}};d.$ExtendedMultiShareCarouselPagerArrowsVisible44=function(a){var c=this,d=a?"_3dm4":"_3dm5",e=a?"_3rvy":"_3rv-";a=a?this.$ExtendedMultiShareCarouselPagerArrowsVisible37():this.$ExtendedMultiShareCarouselPagerArrowsVisible38();a=!this.$ExtendedMultiShareCarouselPagerArrowsVisible41()&&!a;a?(b("CSS").addClass(this.$ExtendedMultiShareCarouselPagerArrowsVisible1,e),b("setTimeout")(function(){b("CSS").addClass(c.$ExtendedMultiShareCarouselPagerArrowsVisible1,d)},this.$ExtendedMultiShareCarouselPagerArrowsVisible5)):(b("CSS").removeClass(this.$ExtendedMultiShareCarouselPagerArrowsVisible1,e),b("CSS").removeClass(this.$ExtendedMultiShareCarouselPagerArrowsVisible1,d))};d.getLastVisibleIndex=function(){return this.$ExtendedMultiShareCarouselPagerArrowsVisible23+this.$ExtendedMultiShareCarouselPagerArrowsVisible8};d.init_pagers=function(){b("CSS").conditionClass(this.$ExtendedMultiShareCarouselPagerArrowsVisible1,"_3dm4",!this.$ExtendedMultiShareCarouselPagerArrowsVisible37())};d.refresh=function(){this.$ExtendedMultiShareCarouselPagerArrowsVisible44(!0),this.$ExtendedMultiShareCarouselPagerArrowsVisible44(!1),b("CSS").conditionClass(this.$ExtendedMultiShareCarouselPagerArrowsVisible1,"_3o-b",this.$ExtendedMultiShareCarouselPagerArrowsVisible41())};d.$ExtendedMultiShareCarouselPagerArrowsVisible42=function(a){a.getPayload()&&this.$ExtendedMultiShareCarouselPagerArrowsVisible23>=this.$ExtendedMultiShareCarouselPagerArrowsVisible2.childNodes.length-2&&(this.readjusting=!0,this.$ExtendedMultiShareCarouselPagerArrowsVisible39(0,!1)),this.hasReq=!1};d.$ExtendedMultiShareCarouselPagerArrowsVisible43=function(a){this.hasReq=!1};d.getID=function(){var a=b("DOMQuery").find(this.$ExtendedMultiShareCarouselPagerArrowsVisible1,"^._5pat");return a.id};d.$ExtendedMultiShareCarouselPagerArrowsVisible35=function(){var a=0,c=0;for(;c<this.$ExtendedMultiShareCarouselPagerArrowsVisible2.childNodes.length;c++)b("CSS").hasClass(this.$ExtendedMultiShareCarouselPagerArrowsVisible2.childNodes[c],"hidden_elem")||a++;return a};d.$ExtendedMultiShareCarouselPagerArrowsVisible39=function(a,c){var d=this;this.$ExtendedMultiShareCarouselPagerArrowsVisible23+=a;var e=(this.$ExtendedMultiShareCarouselPagerArrowsVisible7+l)/2;c&&this.$ExtendedMultiShareCarouselPagerArrowsVisible41()&&(e=l);!c&&!this.$ExtendedMultiShareCarouselPagerArrowsVisible41()&&(e=this.$ExtendedMultiShareCarouselPagerArrowsVisible7);a===0?e=l-(this.$ExtendedMultiShareCarouselPagerArrowsVisible7+l)/2:e*=-a;c=a*this.$ExtendedMultiShareCarouselPagerArrowsVisible6;this.$ExtendedMultiShareCarouselPagerArrowsVisible24-=c+e;var f=this.$ExtendedMultiShareCarouselPagerArrowsVisible1;b("CSS").addClass(f,"_3dm6");new(b("Animation"))(this.$ExtendedMultiShareCarouselPagerArrowsVisible2).to(this.$ExtendedMultiShareCarouselPagerArrowsVisible25,this.$ExtendedMultiShareCarouselPagerArrowsVisible24).duration(n).ease(b("Ease").sineOut).ondone(function(){b("CSS").removeClass(f,"_3dm6"),d.refresh(),d.readjusting=!1}).go();this.$ExtendedMultiShareCarouselPagerArrowsVisible27.slide();this.$ExtendedMultiShareCarouselPagerArrowsVisible29&&this.$ExtendedMultiShareCarouselPagerArrowsVisible29.slide()};return c}(b("mixin")(b("TidyArbiterMixin")));e.exports=a},null);
__d("Droppable",["Collection","Drag","Draggable","Vector","emptyFunction"],function(a,b,c,d,e,f){a=function(){"use strict";function a(c){if(!c)throw new Error("Element should be a DOM node");if(!(this instanceof a))if(c instanceof Array){var d=[];c.forEach(function(b){d.push(new a(b))});return new(b("Collection"))(a,d)}else return new a(c);else this.data={},this.dom=c,this.namespace=null}var c=a.prototype;c.destroy=function(){this.namespace&&b("Drag").removeDroppable(this.namespace,this),this.data=this.dom=null};c.setNamespace=function(a){this.namespace&&b("Drag").removeDroppable(this.namespace,this);this.namespace=a;b("Drag").addDroppable(a,this);return this};c.setZIndex=function(a){this.zIndex=a;return this};c.hasPointMovedHorizontally=function(a){var c=b("Vector").getElementPosition(this.dom);return c.x<=a.x&&this.dom.offsetWidth+c.x>a.x};c.hasPointMovedVertically=function(a){var c=b("Vector").getElementPosition(this.dom);return c.y<=a.y&&this.dom.offsetHeight+c.y>a.y};c.hasPointMovedInside=function(a){return this.hasPointMovedHorizontally(a)&&this.hasPointMovedVertically(a)};c.setDragOverHandler=function(a){this.ondragover=a;return this};c.setDragOutHandler=function(a){this.ondragout=a;return this};c.setDragOverVectically=function(){this.isDraggedOver=a.prototype.hasPointMovedVertically;return this};c.setDragOverHorizontally=function(){this.isDraggedOver=a.prototype.hasPointMovedHorizontally;return this};c.setDragMoveHandler=function(a){this.ondragmove=a;return this};c.setDropHandler=function(a){this.ondrop=a;return this};return a}();a.prototype.zIndex=0;a.prototype.isDraggedOver=a.prototype.hasPointMovedInside;a.prototype.ondragover=c=b("emptyFunction");a.prototype.ondragout=c;a.prototype.ondragmove=c;a.prototype.ondrop=c;a.prototype.getDOM=b("Draggable").prototype.getDOM;a.prototype.setKey=b("Draggable").prototype.setKey;a.prototype.getKey=b("Draggable").prototype.getKey;e.exports=a},null);
__d("SortableGroup",["Arbiter","CSS","DOM","Draggable","Droppable","Style","Vector","emptyFunction","removeFromArray"],function(a,b,c,d,e,f){c=function(){"use strict";function a(){this.namespace="sortable"+ ++a.instanceCount,this.draggables={},this.droppables={},this.sortables={},this.linkedGroups=[],this.linkedGroups.onbeforelinkjump=b("emptyFunction"),this.linkedGroups.onlinkjump=b("emptyFunction"),this.rootNode=null,this.boundingBox=null,this.neverEmpty=!1,this.hasEmptyMessage=!1,this.isDroppable=!0,this.isDraggable=!0,this.useScroller=!0,this.dragOverCriteria="inside",this.requireSameParent=!0,this.previousIndexList=[],this.anchor=null,this.disabled=!1,this.autoWidth=!1,this.placeholderWidth=!1,this.placeholderHeight=!1}var c=a.prototype;c.addEmptyMessage=function(a,c){var d="placeholder";a.parentNode!=c&&b("DOM").appendContent(c,a);this.emptyMessage=a;this._initializeAdded(d,a);this.hasEmptyMessage=!0;this.sortables[d]=a;this.droppables[d]=new(b("Droppable"))(a).setNamespace(this.namespace).setDragOverHandler(this._dragOverHandlerShim.bind(this,d));return this};c.setAutoWidth=function(a){this.autoWidth=a;return this};c.setPlaceholderWidth=function(a){this.placeholderWidth=a;return this};c.setPlaceholderHeight=function(a){this.placeholderHeight=a;return this};c.setUseScroller=function(a){this.useScroller=a;return this};c.setDragOverHorizontally=function(){this.dragOverCriteria="horizontal";return this};c.setDragOverVertically=function(){this.dragOverCriteria="vertical";return this};c.removeEmptyMessage=function(){this.emptyMessage&&b("DOM").remove(this.emptyMessage);this.hasEmptyMessage=!1;this.removeSortable("placeholder");return this};c.addSortable=function(a,c,d,e){this._initializeAdded(a,c);this.sortables[a]=c;this.draggables[a]=new(b("Draggable"))(c).setNamespace(this.namespace).setGutter(this.gutter).setUseAbsolute(!0).setUseScroller(this.useScroller).setGrabHandler(this.grabHandler.bind(this,a)).setDropHandler(this.dropHandler.bind(this,a,e)).setKey("key",a).setBoundingBox(this.boundingBox);d&&this.draggables[a].addHandle(d);this.droppables[a]=new(b("Droppable"))(c).setNamespace(this.namespace).setDragOverHandler(this._dragOverHandlerShim.bind(this,a));this.dragOverCriteria==="horizontal"?this.droppables[a].setDragOverHorizontally():this.dragOverCriteria==="vertical"&&this.droppables[a].setDragOverVectically();return this};c.destroy=function(){for(var a in this.droppables)this.droppables[a].destroy();for(var a in this.draggables)this.draggables[a].destroy();this.droppables=this.draggables=this.rootNode=null;b("removeFromArray")(this.linkedGroups,this);for(var a=0;a<this.linkedGroups.length;a++)this.linkedGroups[a].linkedGroups=this.linkedGroups};c.dragOverHandler=function(a,b){if(!this.isDroppable&&!this.anchor)return;var c=!1;if(!(b in this.draggables)){this.linkedGroups.onbeforelinkjump.call(this,b);if(!this.migrateLinkedSortable(b))throw new Error("Draggable dropped onto a foreign droppable!");c=!0}var d=!0,e=this.getSortables(),f=this.sortables[b],g=this.sortables[a];if(!this.anchor){var h=e.length;for(var i=0;i<h;i++)if(e[i]==g)break;else if(e[i]==f){d=!1;break}}else g=this.anchor;this.onbeforedragover(f,g);e=this.linkedGroups.placeholder;this.insertPlaceholder(e,g,d||this.anchor);e.parentNode.insertBefore(f,e);this.ondragover(f,g,b,a);c&&this.linkedGroups.onlinkjump.call(this,b)};c.dropHandler=function(a,c){if(this._checkLastRemaining()){this.draggables[a].resetPosition();return}var d=this.linkedGroups.placeholder;b("CSS").removeClass(this.sortables[a],"drag");this.draggables[a].resetPosition();d.parentNode.insertBefore(this.sortables[a],d);d.parentNode.removeChild(d);for(var d=0;d<this.linkedGroups.length;d++)this.linkedGroups[d].anchor&&delete this.linkedGroups[d].anchor;this.ondropcallback(a,this.sortables[a]);this.onorderchange();this.previousIndexList.length===0&&(this.previousIndexList=Object.keys(this.sortables));d=this.previousIndexList.indexOf(a);a=this.getOrder().indexOf(a);b("Arbiter").inform("drag-and-drop/"+c,{previousIndex:d,currentIndex:a});this.previousIndexList=this.getOrder()};c.getOrder=function(){var a=[],b=this.getSortables();for(var c=0;c<b.length;c++)for(var d in this.sortables)if(this.sortables[d]==b[c]){a.push(d);break}return a};c.getSortables=function(){return this.rootNode?this.rootNode.childNodes:[]};c.grabHandler=function(a){if(this.disabled||this._checkLastRemaining()||!this.isDraggable){this.draggables[a].killDrag();return}this.onbeforegrabcallback(this.sortables[a],a);var c=this.linkedGroups.placeholder,d=this.sortables[a];b("CSS").setClass(c,d.className);b("CSS").addClass(c,"droppable_placeholder");b("CSS").addClass(d,"drag");b("Vector").getElementDimensions(d).setElementDimensions(c);this.autoWidth?b("Style").set(c,"width","auto"):this.placeholderWidth&&b("Style").set(c,"width",this.placeholderWidth+"px");this.placeholderHeight&&b("Style").set(c,"height",this.placeholderHeight+"px");d.parentNode.insertBefore(c,d);this.ongrabcallback(this.sortables[a],a);this.isDroppable||(this.anchor=d.nextSibling,this.anchor||(this.anchor=b("DOM").create("div"),d.parentNode.appendChild(this.anchor)))};c.insertPlaceholder=function(a,c,d){d?b("DOM").insertBefore(c,a):b("DOM").insertAfter(c,a)};c.keyExists=function(a){return this.sortables[a]};c.link=function(a){a.linkedGroups=this.linkedGroups;this.linkedGroups.length||this.linkedGroups.push(this);this.linkedGroups.push(a);for(var a=0;a<this.linkedGroups.length;a++)if(this.linkedGroups[a].namespace!=this.namespace){this.linkedGroups[a].namespace=this.namespace;for(var b in this.linkedGroups[a].droppables){this.linkedGroups[a].droppables[b].setNamespace(this.namespace);var c=this.linkedGroups[a].draggables[b];c&&c.setNamespace(this.namespace)}}return this};c.migrateLinkedSortable=function(a){for(var b=0;b<this.linkedGroups.length;b++)if(a in this.linkedGroups[b].draggables){this.sortables[a]=this.linkedGroups[b].sortables[a];this.draggables[a]=this.linkedGroups[b].draggables[a];this.draggables[a].setGrabHandler(this.grabHandler.bind(this,a)).setDropHandler(this.dropHandler.bind(this,a));this.droppables[a]=this.linkedGroups[b].droppables[a];this.droppables[a].setDragOverHandler(this._dragOverHandlerShim.bind(this,a));delete this.linkedGroups[b].sortables[a];delete this.linkedGroups[b].draggables[a];delete this.linkedGroups[b].droppables[a];return!0}return!1};c.removeSortable=function(a){a in this.sortables&&(a in this.draggables&&this.draggables[a].destroy(),a in this.droppables&&this.droppables[a].destroy(),delete this.draggables[a],delete this.droppables[a],delete this.sortables[a])};c.removeAllSortables=function(){for(var a in this.sortables)this.removeSortable(a)};c.setDisabled=function(a){this.disabled=a;return this};c.forceDrop=function(a){a in this.sortables&&this.draggables[a].forceDrop()};c.killDrag=function(a){a in this.sortables&&this.draggables[a].killDrag()};c.setBeforeGrabCallback=function(a){this.onbeforegrabcallback=a;return this};c.setBoundingBox=function(a){this.boundingBox=a;for(var a in this.draggables)this.draggables[a].setBoundingBox(this.boundingBox);return this};c.setBeforeDragOverCallback=function(a){this.onbeforedragover=a;return this};c.setDragOverCallback=function(a){this.ondragover=a;return this};c.setDropCallback=function(a){this.ondropcallback=a;return this};c.setDroppable=function(a){this.isDroppable=a;return this};c.setDraggable=function(a){this.isDraggable=a;return this};c.setGrabCallback=function(a){this.ongrabcallback=a;return this};c.setBeforeLinkJumpHandler=function(a){this.linkedGroups.onbeforelinkjump=a;return this};c.setInsertPlaceholderHandler=function(a){this.insertPlaceholder=a};c.setLinkJumpHandler=function(a){this.linkedGroups.onlinkjump=a;return this};c.setNeverEmpty=function(a){this.neverEmpty=a};c.setOrderChangeHandler=function(a){this.onorderchange=a;return this};c.setRequireSameParent=function(a,b){this.requireSameParent=b};c.setSortablesGetter=function(a){this.getSortables=a};c._checkLastRemaining=function(a){a=this.hasEmptyMessage?2:1;return this.neverEmpty&&this.getSortables().length==a};c._dragOverHandlerShim=function(a,b){this.dragOverHandler(a,b.getKey("key"))};c._initializeAdded=function(a,c){if(this.rootNode===null)this.rootNode=c.parentNode,this.linkedGroups.placeholder||(this.linkedGroups.placeholder=b("DOM").create(c.tagName,{className:"dragPlaceholder",style:{padding:"0"}}));else if(this.requireSameParent&&this.rootNode!=c.parentNode)throw new Error("All sortables of a collection must share the same parentNode");if(a in this.draggables)throw new Error("All sortables must have a unique key")};return a}();c.instanceCount=0;Object.assign(c.prototype,{gutter:15,onbeforegrabcallback:d=b("emptyFunction"),onbeforedragover:d,ondragover:d,ondropcallback:d,ongrabcallback:d,onorderchange:d});e.exports=a.SortableGroup||c},null);
__d("ComposerPhotoSorter",["Arbiter","CSS","DOM","Rect","SortableGroup"],function(a,b,c,d,e,f){a={init:function(a,c){this._container=a;this._noDragDuringUploading=c;this._reset();this._update();c=this._update.bind(this);b("Arbiter").subscribe("multi-upload/images-added/"+a.id,c);b("Arbiter").subscribe("multi-upload/image-removed/"+a.id,c)},_reset:function(){this._ids=[],this._sortableGroup=new(b("SortableGroup"))(),this._noDragDuringUploading&&(b("Arbiter").subscribe(["multi-upload/images-upload-start/"+this._container.id],this._sortableGroup.destroy.bind(this._sortableGroup)),b("Arbiter").subscribe(["set-bounding-box/"+this._container.id],this._setBoundingBox.bind(this))),b("CSS").removeClass(this._container,"fbVaultPhotoSorter")},_update:function(){var a=this,c=b("DOM").scry(this._container,".fbVaultGridItem").filter(function(a){return!b("CSS").hasClass(a,"fbVaultEditableGridMoreLink")});if(c.length<2){this._ids.length>1&&(this._sortableGroup.destroy(),this._reset());return}b("CSS").addClass(this._container,"fbVaultPhotoSorter");c.forEach(function(c){var d=b("DOM").scry(c,'input[type="hidden"]')[0];d&&!a._ids.includes(d.value)&&(a._ids.push(d.value),a._sortableGroup.addSortable(d.value,c,null,a._container.id))});this._sortableGroup.setBoundingBox(new(b("Rect"))(this._container))},_setBoundingBox:function(a,b){this._sortableGroup.setBoundingBox(b)}};e.exports=a},null);
__d("VaultGridUploadItem",[],function(a,b,c,d,e,f){a=function(){"use strict";function a(a){this.$1=a}var b=a.prototype;b.getUploadInput=function(){return this.$1};return a}();e.exports=a},null);