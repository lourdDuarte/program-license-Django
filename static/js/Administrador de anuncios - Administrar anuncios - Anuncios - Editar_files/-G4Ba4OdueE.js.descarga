if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("AdsExperimentsWinningPlacementInputSetCheckedAction",["AdsExperimentsWinningPlacementInputProvider","AdsExperimentsWinningPlacementInputReducerPlugins","Laminar"],function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsExperimentsWinningPlacementInputReducerPlugins").AdsExperimentsWinningPlacementInputTrueReducerPlugin,b("AdsExperimentsWinningPlacementInputProvider"),{},"")]},function(){return[]},"AdsExperimentsWinningPlacementInputSetCheckedActionPlugin");e.exports=a},null);
__d("XAdsWinningPlacementRecommendationController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("/ads/placements/winner_study_recommendation/",{ad_account_id:{type:"FBID",required:!0}})},null);
__d("AdsTALWinningPlacementRecommendationProviderPlugin",["AsyncTypedRequest","Promise","XAdsWinningPlacementRecommendationController","loadObjectMapProvider","regeneratorRuntime"],function(a,b,c,d,e,f,g){"use strict";d={initialState:c("loadObjectMapProvider").keyed(a,function(a){return a.toString()})};function a(a){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0;e.next=3;return b("regeneratorRuntime").awrap(new(c("AsyncTypedRequest"))(c("XAdsWinningPlacementRecommendationController").getURIBuilder().setFBID("ad_account_id",a).getURI()).setMethod("GET").setReadOnly(!0).promisePayload());case 3:d=e.sent;return e.abrupt("return",b("Promise").resolve(d));case 7:e.prev=7;e.t0=e["catch"](0);return e.abrupt("return",b("Promise").reject(e.t0));case 10:case"end":return e.stop()}},null,this,[[0,7]])}e=d;g["default"]=e},98);
__d("AdsTALWinningPlacementRecommendationProvider",["AdsTALWinningPlacementRecommendationProviderPlugin","Laminar"],function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsTALWinningPlacementRecommendationProviderPlugin"),"AdsTALWinningPlacementRecommendationProviderPlugin")},null);
__d("AdsUEditorCampaignPlacementBatchSetFromAPISpecAction",["AdsCFCampaignProvider","AdsExperimentsWinningPlacementInputProvider","AdsExperimentsWinningPlacementInputReducerPlugins","AdsUEditorCampaignPlacementBatchSetFromAPISpecReducerPlugin","Laminar"],function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsExperimentsWinningPlacementInputReducerPlugins").AdsExperimentsWinningPlacementInputFalseReducerPlugin,b("AdsExperimentsWinningPlacementInputProvider"),{},""),b("Laminar").__createReducer(b("AdsUEditorCampaignPlacementBatchSetFromAPISpecReducerPlugin"),b("AdsCFCampaignProvider"),{},"")]},function(){return[]},"ADS_CAMPAIGN_EDITOR_PLACEMENT_BATCH_SET_FROM_API_SPEC");e.exports=a},null);
__d("adsExperimentsWinningPlacementRecommendationSelector",["AdsAccountStore","AdsLoadObjectUtils","AdsPECampaignGroupSelectors","AdsTALWinningPlacementRecommendationProvider","LoadObject","adsCreateSelector","adsTALGetAllStudiesByIDSelector"],function(a,b,c,d,e,f,g){"use strict";a=c("adsCreateSelector")([c("AdsAccountStore").getSelectedAccount,c("adsTALGetAllStudiesByIDSelector"),c("AdsTALWinningPlacementRecommendationProvider").toFluxSelector()],function(a,b,e){return d("AdsLoadObjectUtils").all([a]).mapValue(function(a){a=a[0];return a==null?c("LoadObject").empty():d("AdsLoadObjectUtils").all([b,e.get(a.account_id)]).mapValue(function(a){var b=a[0];a=a[1];if(b==null||a==null)return c("LoadObject").empty();var e=a.studyID,g=a.placementSpec;a=a.campaignGroupID;b=b.find(function(a){return a.id.toString()===e.toString()});if(b==null)return c("LoadObject").empty();a=d("AdsPECampaignGroupSelectors").getCachedByFieldsSelector()(a,{objective:null,is_odax_campaign_group:null},f.id).getValue();return{study:b,placementSpec:g,objective:a==null?void 0:a.objective,isODAXCampaignGroup:a==null?void 0:a.is_odax_campaign_group}})})},{name:f.id+".adsWinningPlacementRecommendationSelector"});b=a;g["default"]=b},98);
__d("AdsExperimentsCampaignWinningPlacementContainer.react",["fbt","ix","AdsAccountStore","AdsDataAtom","AdsExperimentsFeatureGatingUtils","AdsExperimentsWinningPlacementInputProvider","AdsExperimentsWinningPlacementInputSetCheckedAction","AdsFluxHooks","AdsLoadObjectUtils","AdsTALRoutingReportICERoute","AdsTestWinnerBadge.react","AdsUEditorCampaignPlacementBatchSetFromAPISpecAction","AdsUEditorCampaignPlacementSetFromAPISpecAction","AdsUEditorHooks","CometPlaceholder.react","GeoCheckboxInput.react","GeoDivider.react","GeoGlimmer.react","GeoIcon.react","GeoLink.react","GeoPopover.react","GeoToast.react","JSResource","URI","adsCreateSelector","adsExperimentsWinningPlacementRecommendationSelector","adsUEditorSelectedCampaignsSelector","fbicon","geoMargin","immutable","lazyLoadComponent","react","useGeoToaster"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=c("lazyLoadComponent")(c("JSResource")("AdsExperimentsCampaignWinningPlacementPopoverContent.react").__setRef("AdsExperimentsCampaignWinningPlacementContainer.react")),l=c("adsCreateSelector")([c("adsUEditorSelectedCampaignsSelector"),c("AdsExperimentsWinningPlacementInputProvider").toFluxSelector(),c("adsExperimentsWinningPlacementRecommendationSelector"),c("AdsAccountStore").getSelectedAccount],function(a,b,c,d){return{campaigns:a,inputUsePlacement:b,recommendationLoader:c,accountLoader:d}},{name:f.id+".selector"});a=function(){var a=d("AdsUEditorHooks").useUEditorCampaignContext(),b=d("AdsFluxHooks").useAdsSelector(l,a,a),e=b.recommendationLoader,f=b.campaigns,g=b.inputUsePlacement;b=b.accountLoader;var i=c("useGeoToaster")(),k=i.add;return d("AdsLoadObjectUtils").all([e,b]).match({error:function(){return null},loading:function(){return null},loaded:function(b){var e=b[0];b=b[1];if(e==null||b==null)return null;var i=e.study,l=e.placementSpec;if(i==null||l==null||!d("AdsExperimentsFeatureGatingUtils").canAccountSeeWinningPlacementFeature(b))return null;var n=f.map(function(a){return a.id}),o=function(b){if(b){var d=babelHelpers["extends"]({},l);Object.keys(d).forEach(function(a){a.startsWith("effective_")&&(d[a.substr("effective_".length)]=d[a])});c("AdsUEditorCampaignPlacementSetFromAPISpecAction").dispatch({campaignIDs:f.map(function(a){return a.id}),hostID:a.hostID,placementAPISpec:d},{line:"115",module:"AdsExperimentsCampaignWinningPlacementContainer.react.js"});var e=f.map(function(a){return a.placement?{campaignID:a.id,placement:a.placement.toJS()}:null}).filter(Boolean);c("AdsDataAtom").addPostDispatchCallback(function(){c("AdsExperimentsWinningPlacementInputSetCheckedAction").dispatch({currentCampaignsWithPlacements:e},{line:"131",module:"AdsExperimentsCampaignWinningPlacementContainer.react.js"}),k(j.jsx(c("GeoToast.react"),{hasIcon:!1,heading:h._("Winning placement applied")}))})}else{b=n.reduce(function(a,b){var c;c=(c=g.get(b))==null?void 0:c.savedPlacement;return c?a.set(b,c):a},c("immutable").Map());c("AdsUEditorCampaignPlacementBatchSetFromAPISpecAction").dispatch({hostID:a.hostID,placementSpecs:b,campaignIDs:n},{line:"158",module:"AdsExperimentsCampaignWinningPlacementContainer.react.js"})}},p=n.every(function(a){return(a=g.get(a))==null?void 0:a.isChecked}),q=new(c("URI"))(c("AdsTALRoutingReportICERoute").path).setQueryData({act:b.account_id,test_id:e.study.id,ref:"am_campaign_edit_winning_placement"});q=j.jsx(c("GeoLink.react"),{href:q,target:"_blank",children:i.name});return j.jsx("div",{className:"ihx95mk1 r17b88bz",children:j.jsx(c("GeoCheckboxInput.react"),{description:h._("Apply the placement from the winner of {study link}.",[h._param("study link",q)]),label:h._("Use A\/B test winner {=m2}",[h._implicitParam("=m2",j.jsx(m,babelHelpers["extends"]({accountCapabilities:b.capabilities,studyLink:q},e,{children:h._("")})))]),value:p,onChange:o})})}})};function m(a){return j.jsx(c("GeoPopover.react"),{content:j.jsx(c("CometPlaceholder.react"),{fallback:j.jsxs("div",{children:[j.jsx(c("GeoGlimmer.react"),{height:10,width:320}),j.jsx(c("GeoGlimmer.react"),{height:10,width:240,xstyle:c("geoMargin").top8}),j.jsx(c("GeoDivider.react"),{}),j.jsx(c("GeoGlimmer.react"),{height:10,width:320}),j.jsx(c("GeoGlimmer.react"),{height:10,width:240,xstyle:c("geoMargin").top8})]}),children:j.jsx(k,babelHelpers["extends"]({},a))}),heading:h._("A\/B Test Winner {=m2}",[h._implicitParam("=m2",j.jsx(c("AdsTestWinnerBadge.react"),{size:12,xstyle:c("geoMargin").end8,children:h._("")}))]),isSticky:!1,position:"right",children:j.jsx(c("GeoIcon.react"),{color:"inherit",icon:d("fbicon")._(i("479175"),12)})})}m.displayName=m.name+" [from "+f.id+"]";b=d("AdsFluxHooks").adsFluxContainer(a);g["default"]=b},98);